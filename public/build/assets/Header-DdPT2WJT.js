import{A as I,_ as p,a as x}from"./ResponsiveNavLink-BCB-x7oE.js";import{q as z,J as N,c as b,r as D,f as $,o as u,b as s,g as O,d as m,s as C,K as V,w as o,n as _,L as j,a as v,u as L,S as R,A as q,p as W,I as H,i as c,e as a,t as k,F as P}from"./app-D5PUyAMe.js";const U={class:"relative"},F={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(w){const d=w,n=h=>{l.value&&h.key==="Escape"&&(l.value=!1)};z(()=>document.addEventListener("keydown",n)),N(()=>document.removeEventListener("keydown",n));const e=b(()=>({48:"w-48"})[d.width.toString()]),t=b(()=>d.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":d.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),l=D(!1);return(h,g)=>(u(),$("div",U,[s("div",{onClick:g[0]||(g[0]=y=>l.value=!l.value)},[C(h.$slots,"trigger")]),O(s("div",{class:"fixed inset-0 z-40",onClick:g[1]||(g[1]=y=>l.value=!1)},null,512),[[V,l.value]]),m(j,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:o(()=>[O(s("div",{class:_(["absolute z-50 mt-2 rounded-md shadow-lg",[e.value,t.value]]),style:{display:"none"},onClick:g[2]||(g[2]=y=>l.value=!1)},[s("div",{class:_(["rounded-md ring-1 ring-black ring-opacity-5",w.contentClasses])},[C(h.$slots,"content")],2)],2),[[V,l.value]])]),_:3})]))}},E={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(w){return(d,n)=>(u(),v(L(R),{href:w.href,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"},{default:o(()=>[C(d.$slots,"default")]),_:3},8,["href"]))}},G={key:0,class:"bg-amber-50 border-l-4 border-amber-400 p-4 mb-4"},J={class:"flex"},Q={class:"ml-3"},X={class:"mt-2 text-sm text-amber-700"},S="kyc_warning_dismissed",Z={__name:"KycWarningBanner",setup(w){const d=q(),n=W(),e=D(!1),t=()=>{const r=localStorage.getItem(S);if(r){const i=new Date(r),f=new Date;i.toDateString()!==f.toDateString()?(localStorage.removeItem(S),e.value=!1):e.value=!0}};z(()=>{t()});const l=b(()=>{var r;return((r=n.props.flash)==null?void 0:r.kyc_warning)||null}),h=b(()=>{if(l.value)return l.value.type;const r=n.url;return r.includes("/vehicles/")&&r.includes("/book")||r.includes("/bookings")?"booking":r.includes("/owner/vehicles")?"listing":"general"}),g=b(()=>{var i,f;const r=d.user||((i=n.props.auth)==null?void 0:i.user);return!r||((f=r.role)==null?void 0:f.name)==="admin"?!1:!r.drivers_license_front||!r.drivers_license_back}),y=b(()=>{var i,f;const r=d.user||((i=n.props.auth)==null?void 0:i.user);return!r||((f=r.role)==null?void 0:f.name)==="admin"?!1:r.kyc_status!=="approved"}),T=b(()=>{if(l.value)return l.value.message;if(h.value==="booking"){if(g.value)return"You need to upload your driver's license to make vehicle bookings.";if(y.value)return"You need to complete KYC verification to make bookings."}return h.value==="listing"?"You need to complete KYC verification to list vehicles.":"Please complete your profile verification to access all features."}),A=b(()=>{var M,B;if(l.value)return!0;const r=d.user||((M=n.props.auth)==null?void 0:M.user),i=n.url;return e.value||!r||((B=r.role)==null?void 0:B.name)==="admin"||i.includes("/profile")?!1:h.value==="booking"?g.value||y.value:h.value==="listing"?y.value:["/bookings","/vehicles/saved","/owner/","/vehicles/"].some(Y=>i.includes(Y))?g.value||y.value:!1}),K=()=>{e.value=!0,localStorage.setItem(S,new Date().toISOString())};return H(()=>n.url,()=>{t()}),(r,i)=>{var f;return A.value?(u(),$("div",G,[s("div",J,[i[3]||(i[3]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),s("div",Q,[i[1]||(i[1]=s("h3",{class:"text-sm font-medium text-amber-800"}," Driver's License Required ",-1)),s("div",X,[s("p",null,[a(k(T.value)+" ",1),m(L(R),{href:((f=l.value)==null?void 0:f.action_url)||r.route("profile.edit"),class:"font-medium underline text-amber-800 hover:text-amber-900"},{default:o(()=>i[0]||(i[0]=[a(" Complete verification here ")])),_:1,__:[0]},8,["href"])])])]),s("div",{class:"ml-auto pl-3"},[s("div",{class:"-mx-1.5 -my-1.5"},[s("button",{onClick:K,type:"button",class:"inline-flex bg-amber-50 rounded-md p-1.5 text-amber-500 hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-amber-50 focus:ring-amber-600"},i[2]||(i[2]=[s("span",{class:"sr-only"},"Dismiss",-1),s("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])):c("",!0)}}},ee={class:"border-b border-gray-100 bg-white"},te={class:"mx-auto px-4 sm:px-6 lg:px-8"},se={class:"flex h-16 justify-between"},re={class:"flex"},oe={class:"flex shrink-0 items-center"},ne={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},ie={class:"hidden sm:ms-6 sm:flex sm:items-center"},ae={class:"relative ms-3"},le={class:"inline-flex rounded-md"},ue={type:"button",class:"inline-flex items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none"},de={class:"-me-2 flex items-center sm:hidden"},fe={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},ve={class:"space-y-1 pb-3 pt-2"},ce={class:"border-t border-gray-200 pb-1 pt-4"},me={class:"px-4"},ge={class:"text-base font-medium text-gray-800"},pe={class:"text-sm font-medium text-gray-500"},he={class:"mt-3 space-y-1"},ke={__name:"Header",setup(w){const d=q();console.log("AUTH USER:",d.user);const n=D(!1);return(e,t)=>(u(),$(P,null,[m(Z),s("nav",ee,[s("div",te,[s("div",se,[s("div",re,[s("div",oe,[m(L(R),{href:e.route("dashboard")},{default:o(()=>[m(I,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"]),t[1]||(t[1]=a(" GoMOTO "))]),s("div",ne,[e.$is("renter","owner")?(u(),v(p,{key:0,href:e.route("dashboard"),active:e.route().current("dashboard")},{default:o(()=>t[2]||(t[2]=[a(" Dashboard ")])),_:1,__:[2]},8,["href","active"])):c("",!0),e.$is("admin")?(u(),v(p,{key:1,href:e.route("admin.dashboard"),active:e.route().current("admin.dashboard")},{default:o(()=>t[3]||(t[3]=[a(" Dashboard ")])),_:1,__:[3]},8,["href","active"])):c("",!0),e.$is("renter")?(u(),v(p,{key:2,href:e.route("public.vehicles.index"),active:e.route().current("public.vehicles.index")},{default:o(()=>t[4]||(t[4]=[a(" Browse Vehicles ")])),_:1,__:[4]},8,["href","active"])):c("",!0),e.$is("renter")?(u(),v(p,{key:3,href:e.route("vehicles.saved"),active:e.route().current("vehicles.saved")},{default:o(()=>t[5]||(t[5]=[a(" ðŸ’¾ Saved Vehicles ")])),_:1,__:[5]},8,["href","active"])):c("",!0),e.$is("renter")?(u(),v(p,{key:4,href:e.route("bookings.index"),active:e.route().current("bookings.*")},{default:o(()=>t[6]||(t[6]=[a(" My Bookings ")])),_:1,__:[6]},8,["href","active"])):c("",!0),e.$is("owner")?(u(),v(p,{key:5,href:e.route("owner.vehicles.index"),active:e.route().current("owner.vehicles.index")},{default:o(()=>t[7]||(t[7]=[a(" My Vehicles ")])),_:1,__:[7]},8,["href","active"])):c("",!0),e.$is("owner")?(u(),v(p,{key:6,href:e.route("owner.bookings.index"),active:e.route().current("owner.bookings.index")},{default:o(()=>t[8]||(t[8]=[a(" Booking Requests ")])),_:1,__:[8]},8,["href","active"])):c("",!0),e.$is("owner")?(u(),v(p,{key:7,href:e.route("owner.bookings.calendar"),active:e.route().current("owner.bookings.calendar")},{default:o(()=>t[9]||(t[9]=[a(" Calendar ")])),_:1,__:[9]},8,["href","active"])):c("",!0),e.$is("owner")?(u(),v(p,{key:8,href:e.route("owner.overcharges.settings"),active:e.route().current("owner.overcharges.settings")},{default:o(()=>t[10]||(t[10]=[a(" Overcharges ")])),_:1,__:[10]},8,["href","active"])):c("",!0),e.$is("owner")?(u(),v(p,{key:9,href:e.route("owner.extensionRequests.index"),active:e.route().current("owner.extensionRequests.*")},{default:o(()=>t[11]||(t[11]=[a(" Extension Requests ")])),_:1,__:[11]},8,["href","active"])):c("",!0)])]),s("div",ie,[s("div",ae,[m(F,{align:"right",width:"48"},{trigger:o(()=>[s("span",le,[s("button",ue,[a(k(e.$page.props.auth.user.name)+" ",1),t[12]||(t[12]=s("svg",{class:"-me-0.5 ms-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]),content:o(()=>[m(E,{href:e.route("profile.edit")},{default:o(()=>t[13]||(t[13]=[a(" Profile ")])),_:1,__:[13]},8,["href"]),m(E,{href:e.route("logout"),method:"post",as:"button"},{default:o(()=>t[14]||(t[14]=[a(" Log Out ")])),_:1,__:[14]},8,["href"])]),_:1})])]),s("div",de,[s("button",{onClick:t[0]||(t[0]=l=>n.value=!n.value),class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 transition duration-150 ease-in-out hover:bg-gray-100 hover:text-gray-500 focus:bg-gray-100 focus:text-gray-500 focus:outline-none"},[(u(),$("svg",fe,[s("path",{class:_({hidden:n.value,"inline-flex":!n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),s("path",{class:_({hidden:!n.value,"inline-flex":n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),s("div",{class:_([{block:n.value,hidden:!n.value},"sm:hidden"])},[s("div",ve,[m(x,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:o(()=>t[15]||(t[15]=[a(" Dashboard ")])),_:1,__:[15]},8,["href","active"])]),s("div",ce,[s("div",me,[s("div",ge,k(e.$page.props.auth.user.first_name)+" "+k(e.$page.props.auth.user.last_name),1),s("div",pe,k(e.$page.props.auth.user.email),1)]),s("div",he,[m(x,{href:e.route("profile.edit")},{default:o(()=>t[16]||(t[16]=[a(" Profile ")])),_:1,__:[16]},8,["href"]),m(x,{href:e.route("logout"),method:"post",as:"button"},{default:o(()=>t[17]||(t[17]=[a(" Log Out ")])),_:1,__:[17]},8,["href"])])])],2)])],64))}};export{ke as _};
