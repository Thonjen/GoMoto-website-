import{r as N,j as U,a as _,o as a,w as v,b as e,f as d,i as r,d as D,u as p,S as b,e as x,t as l,g as w,F as f,h,k as M,v as V,n as u,Q as z}from"./app-D5PUyAMe.js";import{_ as F}from"./AdminLayout-Bs53sOM1.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";import"./ResponsiveNavLink-BCB-x7oE.js";const H={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},$={class:"mb-8"},R={class:"flex justify-between items-center"},K={class:"flex space-x-4"},O={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},P={class:"bg-white overflow-hidden shadow rounded-lg"},Q={class:"p-5"},Y={class:"flex items-center"},E={class:"ml-5 w-0 flex-1"},I={class:"text-lg font-medium text-gray-900"},Z={class:"bg-white overflow-hidden shadow rounded-lg"},q={class:"p-5"},G={class:"flex items-center"},J={class:"ml-5 w-0 flex-1"},W={class:"text-lg font-medium text-gray-900"},X={class:"bg-white overflow-hidden shadow rounded-lg"},ee={class:"p-5"},te={class:"flex items-center"},se={class:"ml-5 w-0 flex-1"},le={class:"text-lg font-medium text-gray-900"},oe={class:"bg-white overflow-hidden shadow rounded-lg"},ae={class:"p-5"},de={class:"flex items-center"},ie={class:"ml-5 w-0 flex-1"},ne={class:"text-lg font-medium text-gray-900"},re={class:"bg-white shadow rounded-lg mb-6"},ue={class:"px-4 py-5 sm:p-6"},me={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},xe=["value"],ce={class:"bg-white shadow rounded-lg"},ge={class:"px-4 py-5 sm:p-6"},ve={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},be={class:"bg-white divide-y divide-gray-200"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap"},_e={class:"text-sm font-medium text-gray-900"},we={class:"text-sm text-gray-500"},he={class:"px-6 py-4 whitespace-nowrap"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},je={key:0},Ce={key:1,class:"text-gray-400"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Se={class:"flex items-center space-x-2"},Le={key:1},De={class:"px-6 py-4 text-sm text-gray-500"},Me=["onClick"],Ve={class:"mt-6"},Te={class:"flex items-center justify-between"},Be={class:"flex-1 flex justify-between sm:hidden"},Ne={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ue={class:"text-sm text-gray-700"},ze={class:"flex space-x-1"},Fe=["innerHTML"],He={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},$e={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white"},Re={class:"mt-3"},Ke={class:"flex justify-between items-center mb-4"},Oe={class:"text-lg font-medium text-gray-900"},Pe={class:"space-y-4"},Qe={class:"grid grid-cols-2 gap-4"},Ye={class:"mt-1 text-sm text-gray-900"},Ee={class:"mt-1"},Ie={class:"mt-1 text-sm text-gray-900"},Ze={class:"text-gray-500"},qe={class:"mt-1 text-sm text-gray-900"},Ge={key:0},Je={key:1,class:"text-gray-500"},We={key:0},Xe={class:"mt-1 flex items-center space-x-2"},et={key:1},tt={class:"mt-1 space-y-1"},st={key:2},lt={class:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded"},ot={class:"grid grid-cols-2 gap-4 text-xs text-gray-500"},at={class:"truncate"},dt={class:"mt-6 flex justify-end"},ct={__name:"KycLogs",props:{logs:Object,stats:Object,admins:Array,filters:Object},setup(i){const y=i,o=N(null),n=U({admin_id:y.filters.admin_id||"",action:y.filters.action||"",date_from:y.filters.date_from||"",date_to:y.filters.date_to||""}),c=()=>{z.get(route("admin.kyc.logs"),n,{preserveState:!0,replace:!0})},T=()=>{n.admin_id="",n.action="",n.date_from="",n.date_to="",c()},B=m=>{o.value=m},k=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(m,t)=>(a(),_(F,null,{default:v(()=>{var j,C,A;return[e("div",H,[e("div",$,[e("div",R,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"KYC Verification Logs"),e("p",{class:"mt-2 text-gray-600"},"Track all KYC verification activities and decisions")],-1)),e("div",K,[D(p(b),{href:m.route("admin.kyc.verifications"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:v(()=>t[6]||(t[6]=[x(" Back to Verifications ")])),_:1,__:[6]},8,["href"]),D(p(b),{href:m.route("admin.dashboard"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:v(()=>t[7]||(t[7]=[x(" Dashboard ")])),_:1,__:[7]},8,["href"])])])]),e("div",O,[e("div",P,[e("div",Q,[e("div",Y,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",E,[e("dl",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Actions",-1)),e("dd",I,l(i.stats.total_actions),1)])])])])]),e("div",Z,[e("div",q,[e("div",G,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",J,[e("dl",null,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Approvals",-1)),e("dd",W,l(i.stats.approvals),1)])])])])]),e("div",X,[e("div",ee,[e("div",te,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",se,[e("dl",null,[t[13]||(t[13]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Rejections",-1)),e("dd",le,l(i.stats.rejections),1)])])])])]),e("div",oe,[e("div",ae,[e("div",de,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),e("div",ie,[e("dl",null,[t[15]||(t[15]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Submissions",-1)),e("dd",ne,l(i.stats.submissions),1)])])])])])]),e("div",re,[e("div",ue,[e("div",me,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Admin",-1)),w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.admin_id=s),onChange:c,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[t[17]||(t[17]=e("option",{value:""},"All Admins",-1)),(a(!0),d(f,null,h(i.admins,s=>(a(),d("option",{key:s.id,value:s.id},l(s.first_name)+" "+l(s.last_name),9,xe))),128))],544),[[M,n.admin_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Action",-1)),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.action=s),onChange:c,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},t[19]||(t[19]=[e("option",{value:""},"All Actions",-1),e("option",{value:"submitted"},"Submitted",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1),e("option",{value:"resubmitted"},"Resubmitted",-1)]),544),[[M,n.action]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date From",-1)),w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.date_from=s),onChange:c,type:"date",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,544),[[V,n.date_from]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date To",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.date_to=s),onChange:c,type:"date",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,544),[[V,n.date_to]])]),e("div",{class:"flex items-end"},[e("button",{onClick:T,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Clear Filters ")])])])]),e("div",ce,[e("div",ge,[e("div",ve,[e("table",pe,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Timestamp"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Action"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Admin"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status Change"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Details")])],-1)),e("tbody",be,[(a(!0),d(f,null,h(i.logs.data,s=>{var g,S,L;return a(),d("tr",{key:s.id},[e("td",fe,l(k(s.created_at)),1),e("td",ye,[e("div",_e,l((g=s.user)==null?void 0:g.first_name)+" "+l((S=s.user)==null?void 0:S.last_name),1),e("div",we,l((L=s.user)==null?void 0:L.email),1)]),e("td",he,[e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.action==="approved"?"bg-green-100 text-green-800":s.action==="rejected"?"bg-red-100 text-red-800":s.action==="submitted"||s.action==="resubmitted"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},l(s.action_label),3)]),e("td",ke,[s.admin?(a(),d("div",je,l(s.admin.first_name)+" "+l(s.admin.last_name),1)):(a(),d("div",Ce,"System"))]),e("td",Ae,[e("div",Se,[s.old_status?(a(),d("span",{key:0,class:u(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",s.old_status==="approved"?"bg-green-100 text-green-800":s.old_status==="rejected"?"bg-red-100 text-red-800":s.old_status==="under_review"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},l(s.old_status.replace("_"," ")),3)):r("",!0),s.old_status?(a(),d("span",Le,"→")):r("",!0),e("span",{class:u(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",s.new_status==="approved"?"bg-green-100 text-green-800":s.new_status==="rejected"?"bg-red-100 text-red-800":s.new_status==="under_review"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},l(s.new_status.replace("_"," ")),3)])]),e("td",De,[e("button",{onClick:it=>B(s),class:"text-blue-600 hover:text-blue-900"}," View Details ",8,Me)])])}),128))])])]),e("div",Ve,[e("nav",Te,[e("div",Be,[i.logs.prev_page_url?(a(),_(p(b),{key:0,href:i.logs.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500"},{default:v(()=>t[24]||(t[24]=[x(" Previous ")])),_:1,__:[24]},8,["href"])):r("",!0),i.logs.next_page_url?(a(),_(p(b),{key:1,href:i.logs.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500"},{default:v(()=>t[25]||(t[25]=[x(" Next ")])),_:1,__:[25]},8,["href"])):r("",!0)]),e("div",Ne,[e("div",null,[e("p",Ue," Showing "+l(i.logs.from||0)+" to "+l(i.logs.to||0)+" of "+l(i.logs.total)+" results ",1)]),e("div",ze,[(a(!0),d(f,null,h(i.logs.links,s=>(a(),d(f,{key:s.label},[s.url?(a(),_(p(b),{key:0,href:s.url,innerHTML:s.label,class:u(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 hover:text-gray-700"])},null,8,["href","innerHTML","class"])):(a(),d("span",{key:1,innerHTML:s.label,class:"relative inline-flex items-center px-4 py-2 border text-sm font-medium cursor-not-allowed opacity-50 bg-white border-gray-300 text-gray-500"},null,8,Fe))],64))),128))])])])])])]),o.value?(a(),d("div",He,[e("div",$e,[e("div",Re,[e("div",Ke,[e("h3",Oe," Log Details - "+l(o.value.action_label),1),e("button",{onClick:t[4]||(t[4]=s=>o.value=null),class:"text-gray-400 hover:text-gray-600"},t[26]||(t[26]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Pe,[e("div",Qe,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Timestamp",-1)),e("p",Ye,l(k(o.value.created_at)),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Action",-1)),e("p",Ee,[e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.value.action==="approved"?"bg-green-100 text-green-800":o.value.action==="rejected"?"bg-red-100 text-red-800":o.value.action==="submitted"||o.value.action==="resubmitted"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},l(o.value.action_label),3)])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"User",-1)),e("p",Ie,[x(l((j=o.value.user)==null?void 0:j.first_name)+" "+l((C=o.value.user)==null?void 0:C.last_name)+" ",1),t[29]||(t[29]=e("br",null,null,-1)),e("span",Ze,l((A=o.value.user)==null?void 0:A.email),1)])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Admin",-1)),e("p",qe,[o.value.admin?(a(),d("span",Ge,l(o.value.admin.first_name)+" "+l(o.value.admin.last_name),1)):(a(),d("span",Je,"System/Self-submission"))])])]),o.value.old_status?(a(),d("div",We,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status Change",-1)),e("div",Xe,[e("span",{class:u(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",o.value.old_status==="approved"?"bg-green-100 text-green-800":o.value.old_status==="rejected"?"bg-red-100 text-red-800":o.value.old_status==="under_review"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},l(o.value.old_status.replace("_"," ")),3),t[32]||(t[32]=e("span",null,"→",-1)),e("span",{class:u(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",o.value.new_status==="approved"?"bg-green-100 text-green-800":o.value.new_status==="rejected"?"bg-red-100 text-red-800":o.value.new_status==="under_review"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},l(o.value.new_status.replace("_"," ")),3)])])):r("",!0),o.value.documents_checked?(a(),d("div",et,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"Documents Checked",-1)),e("div",tt,[(a(!0),d(f,null,h(o.value.documents_checked,(s,g)=>(a(),d("div",{key:g,class:"text-sm"},[e("span",{class:u(s?"text-green-600":"text-red-600")},l(s?"✓":"✗"),3),x(" "+l(g.replace("_"," ").replace(/([A-Z])/g," $1").toLowerCase()),1)]))),128))])])):r("",!0),o.value.reason?(a(),d("div",st,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Reason/Notes",-1)),e("p",lt,l(o.value.reason),1)])):r("",!0),e("div",ot,[e("div",null,[t[36]||(t[36]=e("label",{class:"block font-medium"},"IP Address",-1)),e("p",null,l(o.value.ip_address||"N/A"),1)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block font-medium"},"User Agent",-1)),e("p",at,l(o.value.user_agent||"N/A"),1)])])]),e("div",dt,[e("button",{onClick:t[5]||(t[5]=s=>o.value=null),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Close ")])])])])):r("",!0)])]}),_:1}))}};export{ct as default};
