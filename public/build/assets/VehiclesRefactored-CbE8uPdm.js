import{r as b,c as Y,q as Z,I as ee,a as F,o as d,w as te,b as e,f,i as g,F as C,h as $,e as se,t as c,n as G,g as ie,k as le,d as oe,Q as M}from"./app-D5PUyAMe.js";import{_ as ae}from"./AuthenticatedLayout-B-cZbXuZ.js";import{_ as re,a as ne,b as de}from"./VehicleGrid-t8PejDNz.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";import"./ResponsiveNavLink-BCB-x7oE.js";import"./vue-leaflet.es-eidY92mW.js";import"./leaflet-src-BthnD9zU.js";import"./leaflet-icon-fix-CF40O4Io.js";const ce={class:"py-12"},ue={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},fe={class:"flex flex-col lg:flex-row gap-8"},me={class:"flex-1 lg:w-3/4"},ve={key:0,class:"mb-6"},ge={class:"flex flex-wrap items-center gap-2"},pe=["onClick"],ye={class:"mb-6"},_e={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4"},be={class:"text-2xl font-bold text-gray-900"},he={class:"text-gray-600"},xe={class:"flex flex-col sm:flex-row items-start sm:items-center gap-3"},ke={class:"flex bg-gray-100 rounded-lg p-1"},we={key:0,class:"flex items-center gap-2"},Fe={key:2,class:"mb-8"},Ce={class:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Me=["onClick"],je={class:"flex items-center gap-3"},Oe={class:"w-12 h-12 bg-white bg-opacity-30 rounded-lg flex items-center justify-center"},Ve={class:"font-semibold"},Ae={key:0,class:"text-xs opacity-75"},Se={class:"flex items-center justify-between"},Te={class:"text-sm opacity-90"},Le={key:0,class:"flex items-center space-x-1"},He={class:"text-xs"},Pe={key:4,class:"text-center py-16"},Ne={class:"max-w-md mx-auto"},Be={class:"mb-6"},De={class:"flex flex-wrap justify-center gap-2"},Re=["onClick"],qe={class:"flex flex-col sm:flex-row gap-3 justify-center"},Qe={class:"mt-6 flex justify-center gap-4"},ze={class:"lg:w-1/4"},Ee={class:"sticky top-6"},et={__name:"VehiclesRefactored",props:{vehicles:Object,filterOptions:Object,filters:Object,featuredVehicles:Array},setup(r){var A,S,T,L,H,P,N,B,D,R,q,Q,z,E;const o=r,p=b(!1),h=b(!1),x=b(!1),y=b([]),v=b("list"),a=b({search:((A=o.filters)==null?void 0:A.search)||"",category:((S=o.filters)==null?void 0:S.category)||"",make_id:((T=o.filters)==null?void 0:T.make_id)||"",model_id:((L=o.filters)==null?void 0:L.model_id)||"",type_id:((H=o.filters)==null?void 0:H.type_id)||"",fuel_type_id:((P=o.filters)==null?void 0:P.fuel_type_id)||"",transmission_id:((N=o.filters)==null?void 0:N.transmission_id)||"",color:((B=o.filters)==null?void 0:B.color)||"",price_from:((D=o.filters)==null?void 0:D.price_from)||"",price_to:((R=o.filters)==null?void 0:R.price_to)||"",available_from:((q=o.filters)==null?void 0:q.available_from)||"",available_to:((Q=o.filters)==null?void 0:Q.available_to)||"",sort_by:((z=o.filters)==null?void 0:z.sort_by)||"latest",per_page:((E=o.filters)==null?void 0:E.per_page)||"9"}),j=Y(()=>Object.entries(a.value).some(([i,t])=>i==="sort_by"&&t==="latest"||i==="per_page"&&t==="9"?!1:t!==""&&t!==null&&t!==void 0)),J=Y(()=>{const i=[],t={search:"Search",category:"Category",make_id:"Make",model_id:"Model",type_id:"Sub-Type",fuel_type_id:"Fuel Type",transmission_id:"Transmission",color:"Color",price_from:"Min Price",price_to:"Max Price",available_from:"Available From",available_to:"Available To",sort_by:"Sort"};for(const[n,s]of Object.entries(a.value))if(s&&s!==""&&s!=="latest"&&s!=="9"){let u=t[n]||n;if(n==="make_id"){const l=o.filterOptions.makes.find(m=>m.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="model_id"){const l=y.value.find(m=>m.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="fuel_type_id"){const l=o.filterOptions.fuelTypes.find(m=>m.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="transmission_id"){const l=o.filterOptions.transmissions.find(m=>m.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="type_id"){const l=o.filterOptions.types.find(m=>m.id==s);u+=`: ${(l==null?void 0:l.sub_type)||s}`}else n==="sort_by"?u={latest:"Latest",price_low:"Price: Low to High",price_high:"Price: High to Low",popular:"Most Popular",rating:"Highest Rated"}[s]||s:u+=`: ${s}`;i.push({key:n,label:u})}return i});async function k(){if(a.value.model_id="",y.value=[],!!a.value.make_id){x.value=!0;try{const i=o.filterOptions.makes.find(t=>t.id==a.value.make_id);i&&i.models&&(y.value=i.models)}catch(i){console.error("Failed to load models:",i)}finally{x.value=!1}}}function K(i){a.value.search=i,_()}function W(i,t){a.value[i]===t?a.value[i]="":a.value[i]=t,_()}function X(i){a.value[i]="",i==="make_id"&&(a.value.model_id="",y.value=[]),_()}function _(){h.value=!0;const i=Object.fromEntries(Object.entries(a.value).filter(([t,n])=>n!==""&&n!==null&&n!==void 0));M.get("/vehicles",i,{preserveState:!0,replace:!0,onFinish:()=>{h.value=!1}})}function O(){a.value={search:"",category:"",make_id:"",model_id:"",type_id:"",fuel_type_id:"",transmission_id:"",color:"",price_from:"",price_to:"",available_from:"",available_to:"",sort_by:"latest",per_page:"9"},y.value=[],_()}function V(i){M.visit(i,{preserveState:!0})}function w(i){M.visit(`/vehicles/${i}`)}return Z(()=>{a.value.make_id&&k()}),ee(()=>a.value.make_id,k),(i,t)=>(d(),F(ae,null,{default:te(()=>{var n;return[e("div",ce,[e("div",ue,[e("div",fe,[e("div",me,[j.value?(d(),f("div",ve,[e("div",ge,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-gray-700"},"Active filters:",-1)),(d(!0),f(C,null,$(J.value,s=>(d(),f("span",{key:s.key,class:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full"},[se(c(s.label)+" ",1),e("button",{onClick:u=>X(s.key),class:"ml-1 text-blue-600 hover:text-blue-800"}," Ã— ",8,pe)]))),128))])])):g("",!0),e("div",ye,[e("div",_e,[e("div",null,[e("h2",be,c(r.vehicles.total)+" Vehicle"+c(r.vehicles.total!==1?"s":"")+" Found ",1),e("p",he," Showing "+c(r.vehicles.from)+"-"+c(r.vehicles.to)+" of "+c(r.vehicles.total)+" results ",1)]),e("div",xe,[e("div",ke,[e("button",{onClick:t[0]||(t[0]=s=>v.value="list"),class:G([v.value==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-2 rounded-md text-sm font-medium transition-colors"])}," ðŸ“‹ List ",2),e("button",{onClick:t[1]||(t[1]=s=>v.value="map"),class:G([v.value==="map"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-2 rounded-md text-sm font-medium transition-colors"])}," ðŸ—ºï¸ Map ",2)]),v.value==="list"?(d(),f("div",we,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-600 font-medium"},"Sort by:",-1)),ie(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.sort_by=s),onChange:_,class:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-48"},t[8]||(t[8]=[e("option",{value:"latest"}," Latest Added ",-1),e("option",{value:"price_low"}," Price: Low to High ",-1),e("option",{value:"price_high"}," Price: High to Low ",-1),e("option",{value:"popular"}," Most Popular ",-1),e("option",{value:"rating"}," Highest Rated ",-1)]),544),[[le,a.value.sort_by]])])):g("",!0)])])]),v.value==="map"?(d(),F(re,{key:1,vehicles:r.vehicles.data,onViewDetail:w},null,8,["vehicles"])):g("",!0),v.value==="list"&&!j.value&&((n=r.featuredVehicles)!=null&&n.length)?(d(),f("div",Fe,[e("div",Ce,[t[11]||(t[11]=e("h3",{class:"text-xl font-bold mb-4"}," ðŸŒŸ Featured Vehicles ",-1)),e("div",$e,[(d(!0),f(C,null,$(r.featuredVehicles,s=>{var u,l,m,I;return d(),f("div",{key:`featured-${s.id}`,onClick:U=>w(s.id),class:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-opacity-30 transition-all"},[e("div",je,[e("div",Oe,c(((u=s.type)==null?void 0:u.category)==="car"?"ðŸš—":"ðŸï¸"),1),e("div",null,[e("h4",Ve,c((l=s.make)==null?void 0:l.name)+" "+c((m=s.model)==null?void 0:m.name),1),s.owner?(d(),f("p",Ae," Owner: "+c(s.owner.name),1)):g("",!0),e("div",Se,[e("p",Te," From â‚±"+c(Math.min(...((I=s.pricing_tiers)==null?void 0:I.map(U=>parseFloat(U.price)))||[0])),1),s.ratings_avg_rating>0?(d(),f("div",Le,[t[10]||(t[10]=e("span",{class:"text-yellow-400"},"â˜…",-1)),e("span",He,c(parseFloat(s.ratings_avg_rating).toFixed(1)),1)])):g("",!0)])])])],8,Me)}),128))])])])):g("",!0),v.value==="list"&&r.vehicles.data.length>0?(d(),F(ne,{key:3,vehicles:r.vehicles.data,onViewDetail:w},null,8,["vehicles"])):v.value==="list"&&r.vehicles.data.length===0?(d(),f("div",Pe,[t[14]||(t[14]=e("div",{class:"mx-auto w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t[15]||(t[15]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-3"}," No vehicles match your search ",-1)),e("div",Ne,[t[13]||(t[13]=e("p",{class:"text-gray-600 mb-6"}," Try adjusting your filters or search terms to find more vehicles. ",-1)),e("div",Be,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600 mb-2"}," Try searching for: ",-1)),e("div",De,[(d(),f(C,null,$(["Honda","Toyota","Yamaha","Automatic","Manual"],s=>e("button",{key:s,onClick:u=>K(s),class:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors"},c(s),9,Re)),64))])])]),e("div",qe,[e("button",{onClick:O,class:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"}," Show All Vehicles "),e("button",{onClick:t[3]||(t[3]=s=>p.value=!p.value),class:"border border-gray-300 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors"},c(p.value?"Hide":"Show")+" Advanced Filters ",1)])])):g("",!0),e("div",Qe,[r.vehicles.prev_page_url?(d(),f("button",{key:0,onClick:t[4]||(t[4]=s=>V(r.vehicles.prev_page_url)),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition-colors"}," Prev ")):g("",!0),r.vehicles.next_page_url?(d(),f("button",{key:1,onClick:t[5]||(t[5]=s=>V(r.vehicles.next_page_url)),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition-colors"}," Next ")):g("",!0)])]),e("div",ze,[e("div",Ee,[oe(de,{filters:a.value,"filter-options":r.filterOptions,"available-models":y.value,"loading-models":x.value,"is-filtering":h.value,"show-advanced-filters":p.value,onQuickFilter:W,onApplyFilters:_,onMakeChange:k,onToggleAdvanced:t[6]||(t[6]=s=>p.value=!p.value),onResetFilters:O},null,8,["filters","filter-options","available-models","loading-models","is-filtering","show-advanced-filters"])])])])])])]}),_:1}))}};export{et as default};
