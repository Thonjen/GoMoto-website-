import{j as J,r as $,a as K,o as i,w,b as e,f as n,i as a,d as z,u as F,S as N,e as c,F as W,h as X,t as o,n as v,l as Z,Q as f}from"./app-BJob6Gt2.js";import{O as I}from"./OwnerLayout-DCQ2ysSe.js";import"./Header-BZAdlNjp.js";import"./Footer-B-Y8_Xin.js";const ee={class:"glass-card-dark shadow-glow overflow-hidden"},te={class:"p-6"},se={class:"flex justify-between items-center mb-6"},re={class:"flex bg-white/10 rounded-lg p-1 backdrop-blur-sm border border-white/20"},ie={key:0,class:"text-center py-12"},ne={key:1,class:"space-y-6"},oe={class:"p-6"},le={class:"flex flex-col sm:flex-row items-start justify-between space-y-4 sm:space-y-0"},de={class:"flex space-x-4 min-w-0"},ae=["src","alt"],ce={class:"flex-1 min-w-0"},ue={class:"text-lg font-semibold text-white truncate"},me={class:"text-sm text-white/60 mb-2 truncate"},fe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-white/70"},pe={class:"mt-3 flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-white/70 space-y-1 sm:space-y-0"},xe={class:"truncate"},he={class:"block truncate"},we={key:0},ve=["href"],_e={class:"flex flex-col items-start sm:items-end space-y-3"},ye={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-300 border border-red-400/30"},be={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/20 text-green-300 border border-green-400/30"},ge={key:0,class:"mt-4 p-4 bg-yellow-500/20 border border-yellow-400/30 rounded-lg backdrop-blur-sm"},Ce={class:"flex items-start space-x-3"},ke=["src","onClick"],Pe={key:1,class:"mt-4 p-4 bg-blue-50/20 border border-black-400/30 rounded-lg backdrop-blur-sm"},je={class:"flex items-center justify-between mb-3"},Be={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Me={key:0,class:"text-center"},De=["src","onClick"],Ve={key:1,class:"text-center"},Le=["src","onClick"],Re={key:1,class:"text-center py-4"},Se={key:2,class:"mt-3 p-2 bg-yellow-500/20 border border-yellow-500/30 rounded text-center"},$e={class:"mt-4 flex flex-col sm:flex-row sm:justify-end space-y-2 sm:space-y-0 sm:space-x-3 w-full"},ze=["onClick"],Fe={key:0,class:"flex flex-col sm:flex-row sm:space-x-2 w-full"},Ne=["onClick","disabled"],He=["onClick","disabled"],Ae=["onClick","disabled"],qe=["onClick","disabled"],Oe={class:"glass-card-dark rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto border border-white/20 shadow-glow"},Qe={class:"p-4 text-center bg-white/5"},Te=["src"],Je={__name:"Index",props:{bookings:Array},setup(_){const l=J({}),p=$(!1),x=$("");function H(r){return{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[r]||"bg-white/20 text-white"}function A(r){return r?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}function q(r){return{pending:"Pending",confirmed:"Confirmed",completed:"Completed",cancelled:"Cancelled"}[r]||r}function O(r){return new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function h(r){x.value=r,p.value=!0}function y(){p.value=!1,x.value=""}function Q(r){f.visit(route("owner.bookings.show",r))}function T(r){l[r]=!0,f.post(route("owner.bookings.confirmPayment",r),{},{onFinish:()=>{l[r]=!1}})}function U(r){l[r]=!0,f.post(route("owner.bookings.confirm",r),{},{onFinish:()=>{l[r]=!1}})}function E(r){confirm("Are you sure you want to reject this booking?")&&(l[r]=!0,f.post(route("owner.bookings.reject",r),{},{onFinish:()=>{l[r]=!1}}))}function Y(r){l[r]=!0,f.post(route("owner.bookings.complete",r),{},{onFinish:()=>{l[r]=!1}})}function G(r){if(r.status!=="confirmed"||r.return_time)return!1;const s=new Date,t=new Date(r.pickup_datetime),u=r.pricing_tier;let d=new Date(t);switch(u.duration_unit){case"minutes":d.setMinutes(d.getMinutes()+u.duration_from);break;case"hours":d.setHours(d.getHours()+u.duration_from);break;case"days":d.setDate(d.getDate()+u.duration_from);break;default:d.setDate(d.getDate()+1)}return r.is_extended&&r.extended_until&&(d=new Date(r.extended_until)),s>d}return(r,s)=>(i(),K(I,null,{default:w(()=>[e("div",ee,[e("div",te,[e("div",se,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-3xl font-bold text-white"}," Booking Requests "),e("p",{class:"text-white/70 mt-2"}," Manage bookings for your vehicles ")],-1)),e("div",re,[z(F(N),{href:r.route("owner.bookings.index"),class:"px-3 py-2 rounded-md text-sm font-medium transition-all bg-white/20 backdrop-blur-sm text-white border border-white/30"},{default:w(()=>s[0]||(s[0]=[c(" List View ")])),_:1,__:[0]},8,["href"]),z(F(N),{href:r.route("owner.bookings.calendar"),class:"px-3 py-2 rounded-md text-sm font-medium transition-all hover:bg-white/20 text-white/70 hover:text-white"},{default:w(()=>s[1]||(s[1]=[c(" Calendar View ")])),_:1,__:[1]},8,["href"])])]),_.bookings.length===0?(i(),n("div",ie,s[3]||(s[3]=[e("div",{class:"mb-4"},[e("svg",{class:"mx-auto h-12 w-12 text-white/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1),e("h3",{class:"text-lg font-medium text-white"}," No booking requests ",-1),e("p",{class:"mt-2 text-sm text-white/60"}," You don't have any booking requests yet. ",-1)]))):(i(),n("div",ne,[(i(!0),n(W,null,X(_.bookings,t=>{var u,d,b,g,C,k,P,j,B,M,D,V,L,R,S;return i(),n("div",{key:t.id,class:"glass-card-dark border border-white/20 rounded-lg overflow-hidden shadow-sm hover:bg-white/5 transition-all duration-200 backdrop-blur-sm"},[e("div",oe,[e("div",le,[e("div",de,[e("img",{src:t.vehicle.main_photo_url||"/images/placeholder-vehicle.jpg",alt:`${(u=t.vehicle.brand)==null?void 0:u.name} ${(d=t.vehicle.type)==null?void 0:d.sub_type}`,class:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg border border-white/20 flex-shrink-0"},null,8,ae),e("div",ce,[e("h3",ue,o((b=t.vehicle.brand)==null?void 0:b.name)+" "+o((g=t.vehicle.type)==null?void 0:g.sub_type),1),e("p",me," Booking #"+o(t.id)+" by "+o(t.user.first_name)+" "+o(t.user.last_name),1),e("div",fe,[e("div",null,[s[4]||(s[4]=e("span",{class:"font-medium text-white"},"Duration:",-1)),c(" "+o((C=t.pricing_tier)==null?void 0:C.duration_from)+" "+o(((k=t.pricing_tier)==null?void 0:k.duration_from)===1?(j=(P=t.pricing_tier)==null?void 0:P.duration_unit)==null?void 0:j.slice(0,-1):(B=t.pricing_tier)==null?void 0:B.duration_unit),1)]),e("div",null,[s[5]||(s[5]=e("span",{class:"font-medium"},"Amount:",-1)),c(" â‚±"+o(t.total_amount),1)]),e("div",null,[s[6]||(s[6]=e("span",{class:"font-medium"},"Pickup:",-1)),c(" "+o(O(t.pickup_datetime)),1)]),e("div",null,[s[7]||(s[7]=e("span",{class:"font-medium"},"Payment:",-1)),c(" "+o(((D=(M=t.payment)==null?void 0:M.payment_mode)==null?void 0:D.name)||"N/A"),1)])]),e("div",pe,[e("div",xe,[s[8]||(s[8]=e("span",{class:"font-medium"},"Customer:",-1)),e("span",he,o(t.user.email),1)]),t.user.phone?(i(),n("div",we,[s[9]||(s[9]=e("span",{class:"font-medium"},"Phone:",-1)),e("a",{href:`tel:${t.user.phone}`,class:"text-blue-600 hover:text-blue-800 block truncate"},o(t.user.phone),9,ve)])):a("",!0)])])]),e("div",_e,[e("span",{class:v([H(t.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(q(t.status)),3),t.payment?(i(),n("span",{key:0,class:v([A(t.payment.paid_at),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(t.payment.paid_at?"Payment Confirmed":"Payment Pending"),3)):a("",!0),t.status==="confirmed"&&G(t)?(i(),n("div",ye,s[10]||(s[10]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),c(" âš ï¸ Potential Overcharges ")]))):t.status==="confirmed"?(i(),n("div",be,s[11]||(s[11]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c(" ðŸŸ¢ Active Rental ")]))):a("",!0)])]),(V=t.payment)!=null&&V.receipt_image&&!t.payment.paid_at?(i(),n("div",ge,[s[13]||(s[13]=e("h4",{class:"text-sm font-medium text-yellow-300 mb-2"}," Payment Proof Submitted ",-1)),e("div",Ce,[e("img",{src:t.payment.receipt_image,alt:"Payment Receipt",class:"w-20 h-20 object-cover rounded border border-white/20 cursor-pointer",onClick:m=>h(t.payment.receipt_image)},null,8,ke),s[12]||(s[12]=e("p",{class:"text-sm text-yellow-200"}," Customer uploaded payment proof. Please verify and confirm the payment. ",-1))])])):a("",!0),t.status==="pending"?(i(),n("div",Pe,[e("div",je,[s[14]||(s[14]=e("h4",{class:"text-sm font-medium text-blue-300"},[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 012-2h2a2 2 0 012 2v2m-4 0a2 2 0 012 2v2a2 2 0 01-2 2H9a2 2 0 01-2-2V8a2 2 0 012-2h2z"})]),c(" Renter's Driver License Verification ")],-1)),e("span",{class:v([t.user.kyc_status==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(t.user.kyc_status==="approved"?"âœ“ Verified":"âš  Pending"),3)]),t.user.drivers_license_front_url||t.user.drivers_license_back_url?(i(),n("div",Be,[t.user.drivers_license_front_url?(i(),n("div",Me,[s[15]||(s[15]=e("p",{class:"text-xs text-blue-200 mb-2 font-medium"},"Front Side",-1)),e("img",{src:t.user.drivers_license_front_url,alt:"Driver's License Front",class:"w-full h-24 object-contain bg-white/10 rounded border border-white/20 cursor-pointer hover:bg-white/20 transition-colors",onClick:m=>h(t.user.drivers_license_front_url)},null,8,De)])):a("",!0),t.user.drivers_license_back_url?(i(),n("div",Ve,[s[16]||(s[16]=e("p",{class:"text-xs text-blue-200 mb-2 font-medium"},"Back Side",-1)),e("img",{src:t.user.drivers_license_back_url,alt:"Driver's License Back",class:"w-full h-24 object-contain bg-white/10 rounded border border-white/20 cursor-pointer hover:bg-white/20 transition-colors",onClick:m=>h(t.user.drivers_license_back_url)},null,8,Le)])):a("",!0)])):(i(),n("div",Re,s[17]||(s[17]=[e("svg",{class:"w-8 h-8 text-white/30 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),e("p",{class:"text-sm text-white/50"},"No driver's license uploaded",-1),e("p",{class:"text-xs text-white/40 mt-1"},"Renter needs to complete Driver's License verification",-1)]))),t.user.kyc_status!=="approved"?(i(),n("div",Se,s[18]||(s[18]=[e("p",{class:"text-xs text-yellow-200"}," âš ï¸ Consider requiring Driver's License Verification before confirming this booking ",-1)]))):a("",!0)])):a("",!0),e("div",$e,[e("button",{onClick:m=>Q(t.id),class:"inline-flex items-center px-3 py-1.5 border border-white/30 shadow-sm text-xs font-medium rounded text-white bg-white/10 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 backdrop-blur-sm transition-colors"}," View Details ",8,ze),t.status==="pending"?(i(),n("div",Fe,[(L=t.payment)!=null&&L.receipt_image&&!t.payment.paid_at?(i(),n("button",{key:0,onClick:m=>T(t.id),disabled:l[t.id],class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 transition-colors"},o(l[t.id]?"Processing...":"Confirm Payment"),9,Ne)):a("",!0),((R=t.payment)==null?void 0:R.type)==="cod"||(S=t.payment)!=null&&S.paid_at?(i(),n("button",{key:1,onClick:m=>U(t.id),disabled:l[t.id],class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors"},o(l[t.id]?"Processing...":"Confirm Booking"),9,He)):a("",!0),e("button",{onClick:m=>E(t.id),disabled:l[t.id],class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 transition-colors"},o(l[t.id]?"Processing...":"Reject"),9,Ae)])):a("",!0),t.status==="confirmed"?(i(),n("button",{key:1,onClick:m=>Y(t.id),disabled:l[t.id],class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 transition-colors"},o(l[t.id]?"Processing...":"Mark Complete"),9,qe)):a("",!0)])])])}),128))]))])]),p.value?(i(),n("div",{key:0,onClick:Z(y,["self"]),class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},[e("div",Oe,[e("div",{class:"p-4 border-b border-white/20 flex justify-between items-center"},[s[20]||(s[20]=e("h3",{class:"text-lg font-semibold text-white"},"Payment Receipt",-1)),e("button",{onClick:y,class:"text-white/70 hover:text-white transition-colors"},s[19]||(s[19]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Qe,[e("img",{src:x.value,alt:"Payment Receipt",class:"max-w-full h-auto mx-auto rounded border border-white/20"},null,8,Te)])])])):a("",!0)]),_:1}))}};export{Je as default};
