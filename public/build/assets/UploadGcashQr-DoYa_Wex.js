import{_ as z,r as i,f as v,o as p,b as t,i as C,I as M,l as D,n as F,e as U,x as V,t as Q,U as q,c as P,a as E,w as I,d as B,u as S,Q as H}from"./app-BJQR1LEl.js";import{O as J}from"./OwnerLayout-D00xRfNU.js";/* empty css                                                                            */import{T as O}from"./trash-2-5uJqkNdV.js";import"./Header-CJO43HsM.js";import"./Footer-Clo5IcIT.js";import"./createLucideIcon-B5JPBdvx.js";const K={class:"gcash-qr-uploader"},X={key:0,class:"image-preview"},W=["src"],Y={key:1,class:"upload-prompt"},Z={key:1,class:"upload-progress mt-4"},ee={class:"w-full bg-white/20 rounded-full h-2"},te={__name:"GcashQrUploader",props:{uploadUrl:{type:String,required:!0},existingPhotos:{type:Array,default:()=>[]},maxFileSize:{type:Number,default:5*1024*1024}},emits:["upload-success","upload-error"],setup(b,{expose:x,emit:r}){const m=b,g=r,f=i(null),h=i(!1),u=i(null),d=i(null),o=i(!1),a=i(0),s=i(""),_=i("");m.existingPhotos.length>0&&(u.value=m.existingPhotos[0]);function j(){var l;(l=f.value)==null||l.click()}function T(l){l.preventDefault(),h.value=!1;const e=Array.from(l.dataTransfer.files);e.length>0&&R(e[0])}function $(l){const e=Array.from(l.target.files);e.length>0&&R(e[0])}function R(l){if(!l.type.match(/^image\/(png|jpeg|jpg)$/)){y("Please select a PNG or JPEG image file.","error");return}if(l.size>m.maxFileSize){y(`File is too large. Maximum size is ${A(m.maxFileSize)}.`,"error");return}d.value=l;const e=new FileReader;e.onload=c=>{u.value=c.target.result},e.readAsDataURL(l),s.value="",f.value&&(f.value.value="")}function G(){u.value=null,d.value=null,s.value=""}async function N(){var l,e,c;if(!(!d.value||o.value)){o.value=!0,a.value=0,s.value="";try{const n=new FormData;n.append("gcash_qr",d.value);const w=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");w&&n.append("_token",w);const L=await q.post(m.uploadUrl,n,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":w},onUploadProgress:k=>{k.lengthComputable&&(a.value=Math.round(k.loaded*100/k.total))}});y("GCash QR code uploaded successfully!","success"),g("upload-success",L.data),d.value=null}catch(n){console.error("Upload error:",n);const w=((c=(e=n.response)==null?void 0:e.data)==null?void 0:c.message)||"Upload failed. Please try again.";y(w,"error"),g("upload-error",n)}finally{o.value=!1,a.value=0}}}function A(l){if(l===0)return"0 Bytes";const e=1024,c=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(2))+" "+c[n]}function y(l,e){s.value=l,_.value=e,setTimeout(()=>{s.value=""},5e3)}return x({clearFiles:G}),(l,e)=>(p(),v("div",K,[t("div",{class:F(["upload-area",{"drag-over":h.value,"has-image":u.value}]),onDrop:T,onDragover:e[0]||(e[0]=D(c=>h.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=c=>h.value=!1),onClick:j},[u.value?(p(),v("div",X,[t("img",{src:u.value,alt:"GCash QR Preview",class:"preview-image"},null,8,W),e[3]||(e[3]=M('<div class="image-overlay" data-v-c0d1f154><div class="overlay-content" data-v-c0d1f154><svg class="w-8 h-8 text-white mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c0d1f154><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-c0d1f154></path></svg><p class="text-white text-sm font-medium" data-v-c0d1f154>Click or drag to replace</p></div></div>',1)),t("button",{onClick:D(G,["stop"]),class:"remove-button",title:"Remove image"},e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):(p(),v("div",Y,e[4]||(e[4]=[M('<div class="upload-icon" data-v-c0d1f154><svg class="w-12 h-12 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c0d1f154><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-c0d1f154></path></svg></div><div class="upload-text" data-v-c0d1f154><h4 class="text-lg font-semibold text-white mb-1" data-v-c0d1f154>GCash QR Code</h4><p class="text-white/80 text-sm mb-1" data-v-c0d1f154>Drag &amp; drop or click to upload</p><p class="text-white/60 text-xs" data-v-c0d1f154>Supports: PNG, JPEG (max 5MB, high quality preserved)</p></div>',2)])))],34),d.value&&!o.value?(p(),v("button",{key:0,onClick:N,class:"upload-btn w-full mt-4"},e[5]||(e[5]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),U(" Upload QR Code ")]))):C("",!0),o.value?(p(),v("div",Z,[e[6]||(e[6]=t("div",{class:"flex items-center justify-center text-white/80 mb-2"},[t("svg",{class:"animate-spin w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),U(" Uploading QR Code... ")],-1)),t("div",ee,[t("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:V({width:a.value+"%"})},null,4)])])):C("",!0),t("input",{ref_key:"fileInput",ref:f,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:$,class:"hidden"},null,544),s.value?(p(),v("div",{key:2,class:F(["upload-message mt-4",_.value])},Q(s.value),3)):C("",!0)]))}},ae=z(te,[["__scopeId","data-v-c0d1f154"]]),oe={class:"md:col-span-3 glass-card p-6 shadow-glow border border-white/20"},le={key:0,class:"mb-8 text-center"},se=["src"],re={class:"text-sm text-white/60 mt-2"},ie={class:"text-2xl font-semibold text-white mb-4"},ne={class:"bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-glow"},de={__name:"UploadGcashQr",props:{gcashQrUrl:String,gcashQrUploadDate:String},setup(b){const x=b,r=i({imageUrl:x.gcashQrUrl,uploadDate:x.gcashQrUploadDate}),m=route("owner.gcash-qr.store"),g=i(null);function f(o){var a,s;r.value.imageUrl=o.gcashQrUrl||o.url||o.file_url,r.value.uploadDate=o.gcashQrUploadDate||o.upload_date||new Date().toLocaleDateString(),(s=(a=g.value)==null?void 0:a.clearFiles)==null||s.call(a)}function h(o){console.error("Upload failed:",o),alert("Failed to upload QR code. Please try again.")}function u(){confirm("Are you sure you want to remove your GCash QR code?")&&H.delete(route("owner.gcash-qr.destroy"),{onSuccess:o=>{var a,s;r.value.imageUrl="",r.value.uploadDate="",(s=(a=g.value)==null?void 0:a.clearFiles)==null||s.call(a)},onError:()=>{alert("Failed to remove QR code.")}})}const d=i([{id:1,date:"2025-07-15",description:"Booking for Toyota Camry (John Doe)",amount:4500,type:"credit",status:"Completed"},{id:2,date:"2025-07-10",description:"Payout to GCash",amount:1e4,type:"debit",status:"Completed"},{id:3,date:"2025-07-05",description:"Booking for Honda CRV (Maria Santos)",amount:6e3,type:"credit",status:"Completed"},{id:4,date:"2025-07-01",description:"Booking for Ford Ranger (Pending Payout)",amount:5e3,type:"credit",status:"Pending"}]);return P(()=>d.value.filter(o=>o.type==="credit"&&o.status==="Completed").reduce((o,a)=>o+a.amount,0)),P(()=>d.value.filter(o=>o.type==="credit"&&o.status==="Pending").reduce((o,a)=>o+a.amount,0)),(o,a)=>(p(),E(J,null,{default:I(()=>[t("div",oe,[a[3]||(a[3]=t("h1",{class:"text-3xl font-bold text-white mb-6"},"Upload GCash QR Code",-1)),a[4]||(a[4]=t("p",{class:"text-white/70 mb-6"},"Upload your static GCash QR code image here. This will allow renters to easily pay you for bookings.",-1)),r.value.imageUrl?(p(),v("div",le,[a[1]||(a[1]=t("h2",{class:"text-2xl font-semibold text-white mb-4"},"Current GCash QR Code",-1)),t("img",{src:r.value.imageUrl,alt:"GCash QR Code",class:"w-64 h-64 object-contain mx-auto border border-white/20 rounded-md p-2 shadow-glow"},null,8,se),t("p",re,"Uploaded on: "+Q(r.value.uploadDate),1),t("button",{onClick:u,class:"mt-6 bg-red-500/80 hover:bg-red-500 text-white px-6 py-3 rounded-md font-semibold transition-all duration-300 flex items-center justify-center gap-2 mx-auto backdrop-blur-sm border border-red-400/30"},[B(S(O),{class:"h-5 w-5"}),a[0]||(a[0]=U(" Remove QR Code "))])])):C("",!0),t("h2",ie,Q(r.value.imageUrl?"Update QR Code":"Upload QR Code"),1),t("div",ne,[a[2]||(a[2]=t("div",{class:"mb-4"},[t("h3",{class:"text-lg font-semibold text-white mb-2"},"GCash QR Code Guidelines"),t("ul",{class:"text-white/70 text-sm space-y-1"},[t("li",null,"• Upload a clear, high-quality image of your GCash QR code"),t("li",null,"• Accepted formats: PNG, JPEG"),t("li",null,"• Maximum file size: 5MB"),t("li",null,"• Ensure the QR code is fully visible and scannable")])],-1)),B(ae,{ref_key:"gcashUploader",ref:g,"upload-url":S(m),"existing-photos":r.value.imageUrl?[r.value.imageUrl]:[],"max-file-size":5*1024*1024,onUploadSuccess:f,onUploadError:h},null,8,["upload-url","existing-photos"])])])]),_:1}))}},he=z(de,[["__scopeId","data-v-927844ea"]]);export{he as default};
