import{r as x,c as G,q as Z,M as ee,a as F,o as d,w as te,b as e,f as m,i as h,F as C,h as M,e as se,t as c,n as I,g as ie,k as le,d as oe,Q as $}from"./app-Bp2smfCm.js";import{A as ae}from"./AuthenticatedLayout-CeqprHFF.js";import{_ as re,a as ne,b as de}from"./VehicleGrid-Chot0S9g.js";import"./SaveButton-mFDp0-z6.js";import"./Footer-BrurEhWM.js";import"./Header-fek8bTNe.js";import"./vue-leaflet.es-ChQYoYNx.js";import"./leaflet-icon-fix-UCOAst6i.js";import"./leaflet-src-BZIFbFto.js";const ce={class:"py-12"},ue={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},me={class:"flex flex-col lg:flex-row gap-8"},fe={class:"flex-1 lg:w-3/4"},ve={key:0,class:"mb-6"},he={class:"flex flex-wrap items-center gap-2"},pe=["onClick"],be={class:"mb-6"},ge={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4"},xe={class:"text-2xl font-bold text-white"},_e={class:"text-white/70"},we={class:"flex flex-col sm:flex-row items-start sm:items-center gap-3"},ye={class:"flex bg-white/10 backdrop-blur-sm rounded-lg p-1 border border-white/20"},ke={key:0,class:"flex items-center gap-2"},Fe={key:2,class:"mb-8"},Ce={class:"glass-card p-6 shadow-glow border border-white/20"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$e=["onClick"],je={class:"flex items-center gap-3"},Oe={class:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-white/30"},Ve={class:"font-semibold text-white"},Ae={key:0,class:"text-xs text-white/70"},Le={class:"flex items-center justify-between"},Se={class:"text-sm text-white/90"},Te={key:0,class:"flex items-center space-x-1"},He={class:"text-xs"},Pe={key:4,class:"text-center py-16"},Ne={class:"max-w-md mx-auto"},Be={class:"mb-6"},De={class:"flex flex-wrap justify-center gap-2"},Re=["onClick"],qe={class:"flex flex-col sm:flex-row gap-3 justify-center"},Qe={class:"mt-6 flex justify-center gap-4"},ze={class:"lg:w-1/4"},Ee={class:"sticky top-6"},et={__name:"VehiclesRefactored",props:{vehicles:Object,filterOptions:Object,filters:Object,featuredVehicles:Array},setup(r){var A,L,S,T,H,P,N,B,D,R,q,Q,z,E;const o=r,p=x(!1),_=x(!1),w=x(!1),b=x([]),v=x("list"),a=x({search:((A=o.filters)==null?void 0:A.search)||"",category:((L=o.filters)==null?void 0:L.category)||"",make_id:((S=o.filters)==null?void 0:S.make_id)||"",model_id:((T=o.filters)==null?void 0:T.model_id)||"",type_id:((H=o.filters)==null?void 0:H.type_id)||"",fuel_type_id:((P=o.filters)==null?void 0:P.fuel_type_id)||"",transmission_id:((N=o.filters)==null?void 0:N.transmission_id)||"",color:((B=o.filters)==null?void 0:B.color)||"",price_from:((D=o.filters)==null?void 0:D.price_from)||"",price_to:((R=o.filters)==null?void 0:R.price_to)||"",available_from:((q=o.filters)==null?void 0:q.available_from)||"",available_to:((Q=o.filters)==null?void 0:Q.available_to)||"",sort_by:((z=o.filters)==null?void 0:z.sort_by)||"latest",per_page:((E=o.filters)==null?void 0:E.per_page)||"9"}),j=G(()=>Object.entries(a.value).some(([i,t])=>i==="sort_by"&&t==="latest"||i==="per_page"&&t==="9"?!1:t!==""&&t!==null&&t!==void 0)),J=G(()=>{const i=[],t={search:"Search",category:"Category",make_id:"Make",model_id:"Model",type_id:"Sub-Type",fuel_type_id:"Fuel Type",transmission_id:"Transmission",color:"Color",price_from:"Min Price",price_to:"Max Price",available_from:"Available From",available_to:"Available To",sort_by:"Sort"};for(const[n,s]of Object.entries(a.value))if(s&&s!==""&&s!=="latest"&&s!=="9"){let u=t[n]||n;if(n==="make_id"){const l=o.filterOptions.makes.find(f=>f.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="model_id"){const l=b.value.find(f=>f.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="fuel_type_id"){const l=o.filterOptions.fuelTypes.find(f=>f.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="transmission_id"){const l=o.filterOptions.transmissions.find(f=>f.id==s);u+=`: ${(l==null?void 0:l.name)||s}`}else if(n==="type_id"){const l=o.filterOptions.types.find(f=>f.id==s);u+=`: ${(l==null?void 0:l.sub_type)||s}`}else n==="sort_by"?u={latest:"Latest",price_low:"Price: Low to High",price_high:"Price: High to Low",popular:"Most Popular",rating:"Highest Rated"}[s]||s:u+=`: ${s}`;i.push({key:n,label:u})}return i});async function y(){if(a.value.model_id="",b.value=[],!!a.value.make_id){w.value=!0;try{const i=o.filterOptions.makes.find(t=>t.id==a.value.make_id);i&&i.models&&(b.value=i.models)}catch(i){console.error("Failed to load models:",i)}finally{w.value=!1}}}function K(i){a.value.search=i,g()}function W(i,t){a.value[i]===t?a.value[i]="":a.value[i]=t,g()}function X(i){a.value[i]="",i==="make_id"&&(a.value.model_id="",b.value=[]),g()}function g(){_.value=!0;const i=Object.fromEntries(Object.entries(a.value).filter(([t,n])=>n!==""&&n!==null&&n!==void 0));$.get("/vehicles",i,{preserveState:!0,replace:!0,onFinish:()=>{_.value=!1}})}function O(){a.value={search:"",category:"",make_id:"",model_id:"",type_id:"",fuel_type_id:"",transmission_id:"",color:"",price_from:"",price_to:"",available_from:"",available_to:"",sort_by:"latest",per_page:"9"},b.value=[],g()}function V(i){$.visit(i,{preserveState:!0})}function k(i){$.visit(`/vehicles/${i}`)}return Z(()=>{a.value.make_id&&y()}),ee(()=>a.value.make_id,y),(i,t)=>(d(),F(ae,null,{default:te(()=>{var n;return[e("div",ce,[e("div",ue,[e("div",me,[e("div",fe,[j.value?(d(),m("div",ve,[e("div",he,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-white"},"Active filters:",-1)),(d(!0),m(C,null,M(J.value,s=>(d(),m("span",{key:s.key,class:"inline-flex items-center gap-1 px-3 py-1 bg-primary-500/20 text-primary-300 text-sm rounded-full backdrop-blur-sm border border-primary-400/30"},[se(c(s.label)+" ",1),e("button",{onClick:u=>X(s.key),class:"ml-1 text-primary-300 hover:text-white"}," Ã— ",8,pe)]))),128))])])):h("",!0),e("div",be,[e("div",ge,[e("div",null,[e("h2",xe,c(r.vehicles.total)+" Vehicle"+c(r.vehicles.total!==1?"s":"")+" Found ",1),e("p",_e," Showing "+c(r.vehicles.from)+"-"+c(r.vehicles.to)+" of "+c(r.vehicles.total)+" results ",1)]),e("div",we,[e("div",ye,[e("button",{onClick:t[0]||(t[0]=s=>v.value="list"),class:I([v.value==="list"?"bg-white/20 text-white shadow-glow":"text-white/70 hover:text-white","px-3 py-2 rounded-md text-sm font-medium transition-all duration-300"])}," ðŸ“‹ List ",2),e("button",{onClick:t[1]||(t[1]=s=>v.value="map"),class:I([v.value==="map"?"bg-white/20 text-white shadow-glow":"text-white/70 hover:text-white","px-3 py-2 rounded-md text-sm font-medium transition-all duration-300"])}," ðŸ—ºï¸ Map ",2)]),v.value==="list"?(d(),m("div",ke,[t[9]||(t[9]=e("span",{class:"text-sm text-white/70 font-medium"},"Sort by:",-1)),ie(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.sort_by=s),onChange:g,class:"px-4 py-2 bg-black/60 border border-white/20 rounded-lg text-sm text-white backdrop-blur-sm focus:ring-2 focus:ring-white/40 focus:border-white/40 min-w-48 appearance-none"},t[8]||(t[8]=[e("option",{value:"latest",class:"bg-black/80 text-white hover:bg-white/10 active:bg-white/20"}," Latest Added ",-1),e("option",{value:"price_low",class:"bg-black/80 text-white hover:bg-white/10 active:bg-white/20"}," Price: Low to High ",-1),e("option",{value:"price_high",class:"bg-black/80 text-white hover:bg-white/10 active:bg-white/20"}," Price: High to Low ",-1),e("option",{value:"popular",class:"bg-black/80 text-white hover:bg-white/10 active:bg-white/20"}," Most Popular ",-1),e("option",{value:"rating",class:"bg-black/80 text-white hover:bg-white/10 active:bg-white/20"}," Highest Rated ",-1)]),544),[[le,a.value.sort_by]])])):h("",!0)])])]),v.value==="map"?(d(),F(re,{key:1,vehicles:r.vehicles.data,onViewDetail:k},null,8,["vehicles"])):h("",!0),v.value==="list"&&!j.value&&((n=r.featuredVehicles)!=null&&n.length)?(d(),m("div",Fe,[e("div",Ce,[t[11]||(t[11]=e("h3",{class:"text-xl font-bold mb-4 text-white"}," ðŸŒŸ Featured Vehicles ",-1)),e("div",Me,[(d(!0),m(C,null,M(r.featuredVehicles,s=>{var u,l,f,U;return d(),m("div",{key:`featured-${s.id}`,onClick:Y=>k(s.id),class:"bg-white/10 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/20 transition-all duration-300 border border-white/20"},[e("div",je,[e("div",Oe,c(((u=s.type)==null?void 0:u.category)==="car"?"ðŸš—":"ðŸï¸"),1),e("div",null,[e("h4",Ve,c((l=s.make)==null?void 0:l.name)+" "+c((f=s.model)==null?void 0:f.name),1),s.owner?(d(),m("p",Ae," Owner: "+c(s.owner.name),1)):h("",!0),e("div",Le,[e("p",Se," From â‚±"+c(Math.min(...((U=s.pricing_tiers)==null?void 0:U.map(Y=>parseFloat(Y.price)))||[0])),1),s.ratings_avg_rating>0?(d(),m("div",Te,[t[10]||(t[10]=e("span",{class:"text-yellow-400"},"â˜…",-1)),e("span",He,c(parseFloat(s.ratings_avg_rating).toFixed(1)),1)])):h("",!0)])])])],8,$e)}),128))])])])):h("",!0),v.value==="list"&&r.vehicles.data.length>0?(d(),F(ne,{key:3,vehicles:r.vehicles.data,onViewDetail:k},null,8,["vehicles"])):v.value==="list"&&r.vehicles.data.length===0?(d(),m("div",Pe,[t[14]||(t[14]=e("div",{class:"mx-auto w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t[15]||(t[15]=e("h3",{class:"text-2xl font-bold text-white mb-3"}," No vehicles match your search ",-1)),e("div",Ne,[t[13]||(t[13]=e("p",{class:"text-white/70 mb-6"}," Try adjusting your filters or search terms to find more vehicles. ",-1)),e("div",Be,[t[12]||(t[12]=e("p",{class:"text-sm text-white/70 mb-2"}," Try searching for: ",-1)),e("div",De,[(d(),m(C,null,M(["Honda","Toyota","Yamaha","Automatic","Manual"],s=>e("button",{key:s,onClick:u=>K(s),class:"px-3 py-1 bg-white/10 text-white/80 rounded-full text-sm hover:bg-white/20 transition-all duration-300 backdrop-blur-sm border border-white/20"},c(s),9,Re)),64))])])]),e("div",qe,[e("button",{onClick:O,class:"btn-primary px-8 py-3 font-semibold"}," Show All Vehicles "),e("button",{onClick:t[3]||(t[3]=s=>p.value=!p.value),class:"btn-glass text-white px-8 py-3 font-semibold text-white"},c(p.value?"Hide":"Show")+" Advanced Filters ",1)])])):h("",!0),e("div",Qe,[r.vehicles.prev_page_url?(d(),m("button",{key:0,onClick:t[4]||(t[4]=s=>V(r.vehicles.prev_page_url)),class:"btn-glass px-4 py-2 font-medium"}," Prev ")):h("",!0),r.vehicles.next_page_url?(d(),m("button",{key:1,onClick:t[5]||(t[5]=s=>V(r.vehicles.next_page_url)),class:"btn-glass px-4 py-2 font-medium"}," Next ")):h("",!0)])]),e("div",ze,[e("div",Ee,[oe(de,{filters:a.value,"filter-options":r.filterOptions,"available-models":b.value,"loading-models":w.value,"is-filtering":_.value,"show-advanced-filters":p.value,onQuickFilter:W,onApplyFilters:g,onMakeChange:y,onToggleAdvanced:t[6]||(t[6]=s=>p.value=!p.value),onResetFilters:O},null,8,["filters","filter-options","available-models","loading-models","is-filtering","show-advanced-filters"])])])])])])]}),_:1}))}};export{et as default};
