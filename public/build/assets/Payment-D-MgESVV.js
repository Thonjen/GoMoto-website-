import{r as x,x as R,C as j,a as B,o as n,w as D,b as e,f as i,t as s,d as S,e as r,l as T,i as y,Q as h}from"./app-D5PUyAMe.js";import{_ as U}from"./AuthenticatedLayout-B-cZbXuZ.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";import"./ResponsiveNavLink-BCB-x7oE.js";const V={class:"py-12"},$={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},N={class:"p-6 text-gray-900"},q={class:"bg-gray-50 rounded-lg p-6 mb-8"},Q={class:"grid grid-cols-2 gap-6"},F=["src","alt"],L={class:"font-semibold"},_={class:"w-full h-40 bg-gray-200 rounded-lg overflow-hidden"},G=["src"],I={key:1,class:"flex items-center justify-center h-full text-gray-500"},O={class:"text-xs text-gray-600"},z={class:"space-y-3"},A={class:"block font-medium"},E={class:"block font-medium"},Y={class:"block font-medium"},H={class:"pt-3 border-t"},J={class:"block text-2xl font-bold text-green-600"},K={key:0,class:"mb-8"},W={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-8"},X={class:"text-center"},Z={class:"bg-white p-4 rounded-lg border inline-block"},ee=["src"],te={class:"text-sm text-gray-600 mt-2"},oe={key:0},se={key:0,class:"mt-2 text-sm text-red-600"},ne=["disabled"],ie={key:1,class:"text-center"},le={class:"bg-green-50 border border-green-200 rounded-lg p-4"},ae=["src"],de={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},re={key:1,class:"mb-8"},ue={class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},me={class:"flex items-start"},ce={class:"mt-2 text-blue-700"},ge={class:"list-disc list-inside space-y-1"},be={class:"bg-gray-50 rounded-lg p-6 mb-8"},fe={class:"flex items-center space-x-4"},xe={class:"block font-medium"},ye={key:0},he=["href"],Pe={__name:"Payment",props:{booking:Object,errors:Object},setup(o){const u=o,d=x(null),l=x(!1),m=R({receipt_image:null});function v(a){d.value=a.target.files[0],m.receipt_image=a.target.files[0]}function p(){d.value&&(l.value=!0,m.post(route("bookings.uploadReceipt",u.booking.id),{onSuccess:()=>{d.value=null},onError:()=>{l.value=!1},onFinish:()=>{l.value=!1}}))}function k(a){return new Date(a).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function w(){h.visit(route("bookings.index"))}function C(){h.visit(`/vehicles/${u.booking.vehicle.id}`)}return(a,t)=>{const P=j("MapPin");return n(),B(U,null,{default:D(()=>{var c,g,b,f;return[e("div",V,[e("div",$,[e("div",M,[e("div",N,[t[27]||(t[27]=e("h1",{class:"text-3xl font-bold text-gray-800 mb-8"}," Payment ",-1)),e("div",q,[t[6]||(t[6]=e("h2",{class:"text-xl font-semibold mb-4"}," Booking Summary ",-1)),e("div",Q,[e("div",null,[e("img",{src:o.booking.vehicle.main_photo_url||"/images/placeholder-vehicle.jpg",alt:`${(c=o.booking.vehicle.brand)==null?void 0:c.name} ${(g=o.booking.vehicle.type)==null?void 0:g.sub_type}`,class:"w-full h-32 object-cover rounded-lg mb-3"},null,8,F),e("h3",L,s((b=o.booking.vehicle.brand)==null?void 0:b.name)+" "+s((f=o.booking.vehicle.type)==null?void 0:f.sub_type),1),t[1]||(t[1]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"}," Location: ",-1)),e("div",_,[o.booking.vehicle.lat&&o.booking.vehicle.lng?(n(),i("iframe",{key:0,src:`https://maps.google.com/maps?q=${o.booking.vehicle.lat},${o.booking.vehicle.lng}&z=18&t=k&output=embed`,class:"w-full h-full border-0",loading:"lazy",allowfullscreen:""},null,8,G)):(n(),i("div",I,[S(P,{class:"h-8 w-8 mr-2"}),t[0]||(t[0]=e("span",null,"Location not available",-1))]))]),e("p",O," Location: "+s(o.booking.vehicle.location_name),1)]),e("div",z,[e("div",null,[t[2]||(t[2]=e("span",{class:"text-sm text-gray-500"},"Duration:",-1)),e("span",A,s(o.booking.pricing_tier.duration_from)+" "+s(o.booking.pricing_tier.duration_unit),1)]),e("div",null,[t[3]||(t[3]=e("span",{class:"text-sm text-gray-500"},"Pickup Date & Time:",-1)),e("span",E,s(k(o.booking.pickup_datetime)),1)]),e("div",null,[t[4]||(t[4]=e("span",{class:"text-sm text-gray-500"},"Payment Method:",-1)),e("span",Y,s(o.booking.payment.payment_mode.name),1)]),e("div",H,[t[5]||(t[5]=e("span",{class:"text-sm text-gray-500"},"Total Amount:",-1)),e("span",J,"₱"+s(o.booking.total_amount),1)])])])]),o.booking.payment.type==="gcash"?(n(),i("div",K,[t[15]||(t[15]=e("h2",{class:"text-xl font-semibold mb-4"}," GCash Payment ",-1)),o.booking.vehicle.owner.gcash_qr?(n(),i("div",W,[e("div",X,[t[8]||(t[8]=e("h3",{class:"text-lg font-medium mb-4"}," Scan QR Code to Pay ",-1)),e("div",Z,[e("img",{src:"/storage/"+o.booking.vehicle.owner.gcash_qr,alt:"GCash QR Code",class:"w-64 h-64 object-contain"},null,8,ee)]),e("p",te,[t[7]||(t[7]=r(" Amount: ")),e("strong",null,"₱"+s(o.booking.total_amount),1)])]),e("div",null,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium mb-4"}," Upload Payment Proof ",-1)),o.booking.payment.receipt_image?(n(),i("div",ie,[e("div",le,[t[11]||(t[11]=e("h4",{class:"text-lg font-medium text-green-800"}," Receipt Uploaded! ",-1)),t[12]||(t[12]=e("p",{class:"text-green-700 mt-2"}," Your payment proof has been submitted and is awaiting verification. ",-1)),e("img",{src:o.booking.payment.receipt_image,alt:"Payment Receipt",class:"mt-4 mx-auto max-w-xs rounded-lg border"},null,8,ae)])])):(n(),i("div",oe,[e("form",{onSubmit:T(p,["prevent"]),class:"space-y-4"},[e("div",null,[t[9]||(t[9]=e("label",{for:"receipt",class:"block text-sm font-medium text-gray-700"}," Upload Receipt/Screenshot ",-1)),e("input",{type:"file",id:"receipt",onChange:v,accept:"image/*",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:""},null,32),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mt-1"}," Upload a clear image of your payment confirmation ",-1)),o.errors.receipt_image?(n(),i("div",se,s(o.errors.receipt_image),1)):y("",!0)]),e("button",{type:"submit",disabled:!d.value||l.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},s(l.value?"Uploading...":"Upload Receipt"),9,ne)],32)]))])])):(n(),i("div",de,t[14]||(t[14]=[e("p",{class:"text-red-800"},[e("strong",null,"Notice:"),r(" The vehicle owner has not uploaded their GCash QR code yet. Please contact the owner directly for payment instructions. ")],-1)])))])):(n(),i("div",re,[t[22]||(t[22]=e("h2",{class:"text-xl font-semibold mb-4"}," Cash on Delivery ",-1)),e("div",ue,[e("div",me,[e("div",null,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-blue-800"}," Payment Instructions ",-1)),e("div",ce,[t[20]||(t[20]=e("p",{class:"mb-2"}," You have selected Cash on Delivery payment method. ",-1)),e("ul",ge,[e("li",null,[t[16]||(t[16]=r(" Prepare the exact amount: ")),e("strong",null,"₱"+s(o.booking.total_amount),1)]),t[17]||(t[17]=e("li",null," Payment will be collected when you pick up the vehicle ",-1)),t[18]||(t[18]=e("li",null," Make sure to bring a valid ID for verification ",-1)),t[19]||(t[19]=e("li",null," Contact the owner if you need to change the pickup time ",-1))])])])])])])),e("div",be,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold mb-3"}," Need Help? ",-1)),t[26]||(t[26]=e("p",{class:"text-gray-600 mb-4"}," If you have any questions about your booking or payment, please contact the vehicle owner: ",-1)),e("div",fe,[e("div",null,[t[23]||(t[23]=e("span",{class:"text-sm text-gray-500"},"Owner:",-1)),e("span",xe,s(o.booking.vehicle.owner.first_name)+" "+s(o.booking.vehicle.owner.last_name),1)]),o.booking.vehicle.owner.phone?(n(),i("div",ye,[t[24]||(t[24]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("a",{href:`tel:${o.booking.vehicle.owner.phone}`,class:"block font-medium text-blue-600 hover:text-blue-800"},s(o.booking.vehicle.owner.phone),9,he)])):y("",!0)])]),e("div",{class:"flex justify-between"},[e("button",{onClick:w,class:"px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," View My Bookings "),e("button",{onClick:C,class:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Back to Vehicle ")])])])])])]}),_:1})}}};export{Pe as default};
