import{r as y,c as I,q as te,M as se,a as C,o as c,w as ie,b as e,f,i as g,t as u,F as M,h as $,e as J,n as K,g as le,k as oe,d as ae,Q as V}from"./app-BJob6Gt2.js";import{G as re}from"./GuestLayout-DJUlx4fi.js";import{_ as ne,a as de,b as ce}from"./VehicleGrid-Cc15s0lL.js";import"./SaveButton-CXVODCRW.js";import"./Footer-B-Y8_Xin.js";import"./vue-leaflet.es-CgwutaKX.js";import"./leaflet-icon-fix-C744IXMS.js";import"./leaflet-src-CQxPF6Ph.js";const ue={class:"min-h-screen py-8"},fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ve={class:"flex flex-col lg:flex-row gap-8"},me={class:"flex-1 lg:w-3/4 space-y-6"},ge={class:"glass-card p-6 shadow-glow"},pe={class:"mt-4 flex flex-wrap gap-4"},xe={class:"text-center"},he={class:"text-xl font-bold text-primary-300"},ye={class:"text-center"},be={class:"text-xl font-bold text-green-300"},_e={key:0,class:"glass-card p-4 shadow-glow"},we={class:"flex flex-wrap items-center gap-2"},ke=["onClick"],Fe={class:"glass-card p-6 shadow-glow"},Ce={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4"},Me={class:"text-2xl font-bold text-white"},$e={class:"text-white/80"},Ve={class:"flex flex-col sm:flex-row items-start sm:items-center gap-3"},je={class:"flex bg-gray-100 rounded-lg p-1"},Oe={key:0,class:"flex items-center gap-2"},Se={key:2,class:"mb-8"},Ae={class:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te=["onClick"],Pe={class:"flex items-center gap-3"},He={class:"w-12 h-12 bg-white bg-opacity-30 rounded-lg flex items-center justify-center"},Ne={class:"font-semibold"},Be={key:0,class:"text-xs opacity-75"},De={class:"flex items-center justify-between mt-2"},qe={class:"text-sm opacity-90"},ze={key:0,class:"flex items-center space-x-1"},Qe={class:"text-xs opacity-90"},Re={key:4,class:"text-center py-16"},Ee={class:"max-w-md mx-auto"},Ge={class:"mb-6"},Ue={class:"flex flex-wrap justify-center gap-2"},Ye=["onClick"],Ie={class:"flex flex-col sm:flex-row gap-3 justify-center"},Je={class:"mt-6 flex justify-center gap-4"},Ke={class:"lg:w-1/4"},We={class:"sticky top-6"},at={__name:"VehiclesPublic",props:{vehicles:Object,filterOptions:Object,filters:Object,featuredVehicles:Array},setup(a){var S,A,L,T,P,H,N,B,D,q,z,Q,R,E;const r=a,p=y(!1),b=y(!1),_=y(!1),x=y([]),m=y("list"),n=y({search:((S=r.filters)==null?void 0:S.search)||"",category:((A=r.filters)==null?void 0:A.category)||"",make_id:((L=r.filters)==null?void 0:L.make_id)||"",model_id:((T=r.filters)==null?void 0:T.model_id)||"",type_id:((P=r.filters)==null?void 0:P.type_id)||"",fuel_type_id:((H=r.filters)==null?void 0:H.fuel_type_id)||"",transmission_id:((N=r.filters)==null?void 0:N.transmission_id)||"",color:((B=r.filters)==null?void 0:B.color)||"",price_from:((D=r.filters)==null?void 0:D.price_from)||"",price_to:((q=r.filters)==null?void 0:q.price_to)||"",available_from:((z=r.filters)==null?void 0:z.available_from)||"",available_to:((Q=r.filters)==null?void 0:Q.available_to)||"",sort_by:((R=r.filters)==null?void 0:R.sort_by)||"latest",per_page:((E=r.filters)==null?void 0:E.per_page)||"9"}),j=I(()=>Object.entries(n.value).some(([i,t])=>i==="sort_by"&&t==="latest"||i==="per_page"&&t==="9"?!1:t!==""&&t!==null&&t!==void 0)),W=I(()=>{const i=[],t={search:"Search",category:"Category",make_id:"Make",model_id:"Model",type_id:"Sub-Type",fuel_type_id:"Fuel Type",transmission_id:"Transmission",color:"Color",price_from:"Min Price",price_to:"Max Price",available_from:"Available From",available_to:"Available To",sort_by:"Sort"};for(const[d,o]of Object.entries(n.value))if(o&&o!==""&&o!=="latest"&&o!=="9"){let s=t[d]||d;if(d==="make_id"){const l=r.filterOptions.makes.find(v=>v.id==o);s+=`: ${(l==null?void 0:l.name)||o}`}else if(d==="model_id"){const l=x.value.find(v=>v.id==o);s+=`: ${(l==null?void 0:l.name)||o}`}else if(d==="fuel_type_id"){const l=r.filterOptions.fuelTypes.find(v=>v.id==o);s+=`: ${(l==null?void 0:l.name)||o}`}else if(d==="transmission_id"){const l=r.filterOptions.transmissions.find(v=>v.id==o);s+=`: ${(l==null?void 0:l.name)||o}`}else if(d==="type_id"){const l=r.filterOptions.types.find(v=>v.id==o);s+=`: ${(l==null?void 0:l.sub_type)||o}`}else d==="sort_by"?s={latest:"Latest",price_low:"Price: Low to High",price_high:"Price: High to Low",popular:"Most Popular",rating:"Highest Rated"}[o]||o:s+=`: ${o}`;i.push({key:d,label:s})}return i});async function w(){if(n.value.model_id="",x.value=[],!!n.value.make_id){_.value=!0;try{const i=r.filterOptions.makes.find(t=>t.id==n.value.make_id);i&&i.models&&(x.value=i.models)}catch(i){console.error("Failed to load models:",i)}finally{_.value=!1}}}function X(i){n.value.search=i,h()}function Z(i,t){n.value[i]===t?n.value[i]="":n.value[i]=t,h()}function ee(i){n.value[i]="",i==="make_id"&&(n.value.model_id="",x.value=[]),h()}function h(){b.value=!0;const i=Object.fromEntries(Object.entries(n.value).filter(([t,d])=>d!==""&&d!==null&&d!==void 0));V.get("/vehicles",i,{preserveState:!0,replace:!0,onFinish:()=>{b.value=!1}})}function k(){n.value={search:"",category:"",make_id:"",model_id:"",type_id:"",fuel_type_id:"",transmission_id:"",color:"",price_from:"",price_to:"",available_from:"",available_to:"",sort_by:"latest",per_page:"9"},x.value=[],h()}function O(i){V.visit(i,{preserveState:!0})}function F(i){sessionStorage.setItem("intended_vehicle",i.toString()),V.visit("/login",{data:{intended:`/vehicles/${i}`}})}return te(()=>{n.value.make_id&&w()}),se(()=>n.value.make_id,w),(i,t)=>(c(),C(re,null,{default:ie(()=>{var d,o;return[e("div",ue,[e("div",fe,[e("div",ve,[e("div",me,[e("div",ge,[t[9]||(t[9]=e("h1",{class:"text-3xl font-bold text-white mb-2"},"Browse Vehicles",-1)),t[10]||(t[10]=e("p",{class:"text-white/80"},"Discover amazing vehicles for rent in Surigao del Norte",-1)),e("div",pe,[e("div",xe,[e("div",he,u(a.vehicles.total||0),1),t[7]||(t[7]=e("div",{class:"text-xs text-white/60"},"Available",-1))]),e("div",ye,[e("div",be,u(((d=a.featuredVehicles)==null?void 0:d.length)||0),1),t[8]||(t[8]=e("div",{class:"text-xs text-white/60"},"Featured",-1))])])]),j.value?(c(),f("div",_e,[e("div",we,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-white/80"},"Active filters:",-1)),(c(!0),f(M,null,$(W.value,s=>(c(),f("span",{key:s.key,class:"inline-flex items-center gap-1 px-3 py-1 bg-white/10 text-white/90 text-sm rounded-full border border-white/20"},[J(u(s.label)+" ",1),e("button",{onClick:l=>ee(s.key),class:"ml-1 text-white/60 hover:text-white transition-colors"}," Ã— ",8,ke)]))),128)),e("button",{onClick:k,class:"text-white/60 hover:text-white text-sm underline"}," Clear all ")])])):g("",!0),e("div",Fe,[e("div",Ce,[e("div",null,[e("h2",Me,u(a.vehicles.total)+" Vehicle"+u(a.vehicles.total!==1?"s":"")+" Found ",1),e("p",$e,[J(" Showing "+u(a.vehicles.from)+"-"+u(a.vehicles.to)+" of "+u(a.vehicles.total)+" results ",1),t[12]||(t[12]=e("span",{class:"text-primary-300 font-medium"},"â€¢ Log in to book vehicles",-1))])]),e("div",Ve,[e("div",je,[e("button",{onClick:t[0]||(t[0]=s=>m.value="list"),class:K([m.value==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-2 rounded-md text-sm font-medium transition-colors"])}," ðŸ“‹ List ",2),e("button",{onClick:t[1]||(t[1]=s=>m.value="map"),class:K([m.value==="map"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-2 rounded-md text-sm font-medium transition-colors"])}," ðŸ—ºï¸ Map ",2)]),m.value==="list"?(c(),f("div",Oe,[t[14]||(t[14]=e("span",{class:"text-sm text-white/70 font-medium"},"Sort by:",-1)),le(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.sort_by=s),onChange:h,class:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-48"},t[13]||(t[13]=[e("option",{value:"latest"},"Latest Added",-1),e("option",{value:"price_low"},"Price: Low to High",-1),e("option",{value:"price_high"},"Price: High to Low",-1),e("option",{value:"popular"},"Most Popular",-1),e("option",{value:"rating"},"Highest Rated",-1)]),544),[[oe,n.value.sort_by]])])):g("",!0)])])]),m.value==="map"?(c(),C(ne,{key:1,vehicles:a.vehicles.data,onViewDetail:F},null,8,["vehicles"])):g("",!0),m.value==="list"&&!j.value&&((o=a.featuredVehicles)!=null&&o.length)?(c(),f("div",Se,[e("div",Ae,[t[17]||(t[17]=e("h3",{class:"text-xl font-bold mb-4"},"ðŸŒŸ Featured Vehicles",-1)),e("div",Le,[(c(!0),f(M,null,$(a.featuredVehicles,s=>{var l,v,G,U;return c(),f("div",{key:`featured-${s.id}`,onClick:Y=>F(s.id),class:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-opacity-30 transition-all"},[e("div",Pe,[e("div",He,u(((l=s.type)==null?void 0:l.category)==="car"?"ðŸš—":"ðŸï¸"),1),e("div",null,[e("h4",Ne,u((v=s.make)==null?void 0:v.name)+" "+u((G=s.model)==null?void 0:G.name),1),s.owner?(c(),f("p",Be,"Owner: "+u(s.owner.name),1)):g("",!0),e("div",De,[e("p",qe," From â‚±"+u(Math.min(...((U=s.pricing_tiers)==null?void 0:U.map(Y=>parseFloat(Y.price)))||[0])),1),s.ratings_avg_rating>0?(c(),f("div",ze,[t[15]||(t[15]=e("span",{class:"text-yellow-400"},"â˜…",-1)),e("span",Qe,u(parseFloat(s.ratings_avg_rating).toFixed(1)),1)])):g("",!0)]),t[16]||(t[16]=e("p",{class:"text-xs opacity-75 mt-1"},"Click to view details & book",-1))])])],8,Te)}),128))])])])):g("",!0),m.value==="list"&&a.vehicles.data.length>0?(c(),C(de,{key:3,vehicles:a.vehicles.data,onViewDetail:F},null,8,["vehicles"])):m.value==="list"&&a.vehicles.data.length===0?(c(),f("div",Re,[t[20]||(t[20]=e("div",{class:"mx-auto w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t[21]||(t[21]=e("h3",{class:"text-2xl font-bold text-white mb-3"},"No vehicles match your search",-1)),e("div",Ee,[t[19]||(t[19]=e("p",{class:"text-white mb-6"}," Try adjusting your filters or search terms to find more vehicles. ",-1)),e("div",Ge,[t[18]||(t[18]=e("p",{class:"text-sm text-white/70 mb-2"},"Try searching for:",-1)),e("div",Ue,[(c(),f(M,null,$(["Honda","Toyota","Yamaha","Automatic","Manual"],s=>e("button",{key:s,onClick:l=>X(s),class:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors"},u(s),9,Ye)),64))])])]),e("div",Ie,[e("button",{onClick:k,class:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"}," Show All Vehicles "),e("button",{onClick:t[3]||(t[3]=s=>p.value=!p.value),class:"border border-gray-300 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors"},u(p.value?"Hide":"Show")+" Advanced Filters ",1)])])):g("",!0),e("div",Je,[a.vehicles.prev_page_url?(c(),f("button",{key:0,onClick:t[4]||(t[4]=s=>O(a.vehicles.prev_page_url)),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition-colors"}," Prev ")):g("",!0),a.vehicles.next_page_url?(c(),f("button",{key:1,onClick:t[5]||(t[5]=s=>O(a.vehicles.next_page_url)),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition-colors"}," Next ")):g("",!0)])]),e("div",Ke,[e("div",We,[ae(ce,{filters:n.value,"filter-options":a.filterOptions,"available-models":x.value,"loading-models":_.value,"is-filtering":b.value,"show-advanced-filters":p.value,onQuickFilter:Z,onApplyFilters:h,onMakeChange:w,onToggleAdvanced:t[6]||(t[6]=s=>p.value=!p.value),onResetFilters:k},null,8,["filters","filter-options","available-models","loading-models","is-filtering","show-advanced-filters"])])])])])])]}),_:1}))}};export{at as default};
