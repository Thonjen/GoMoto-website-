import{r as h,x as S,f as i,o as n,d as M,u as l,y as I,w as v,b as e,i as u,F as b,h as A,t as o,n as B,a as _,S as w,e as N,l as p,g as V,v as z}from"./app-D5PUyAMe.js";import{_ as O}from"./OwnerLayout-R8EC1rpz.js";import"./ResponsiveNavLink-BCB-x7oE.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";const W={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Y={class:"p-6 text-gray-900"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={key:0,class:"text-center py-8"},Q={key:1,class:"space-y-6"},X={class:"flex items-start justify-between mb-4"},Z={class:"flex items-center space-x-4"},ee={class:"text-lg font-semibold text-gray-900"},te={class:"text-sm text-gray-600"},se={class:"text-xs text-gray-500"},oe={class:"bg-gray-50 rounded-lg p-4 mb-4"},ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},re={class:"text-center"},ie={class:"text-2xl font-bold text-blue-600"},le={class:"text-center"},de={class:"text-2xl font-bold text-green-600"},ae={class:"text-center"},ue={class:"font-medium"},ce={key:0,class:"mb-4"},xe={class:"text-gray-600 bg-white border rounded p-3"},ge={key:1,class:"mb-4"},me={class:"text-gray-600 bg-white border rounded p-3"},be={key:2,class:"flex justify-end space-x-3"},pe=["onClick"],fe=["onClick"],ye={key:2,class:"mt-6"},he={class:"flex items-center justify-between"},ve={class:"flex-1 flex justify-between sm:hidden"},_e={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},we={class:"text-sm text-gray-700"},ke={class:"relative z-0 inline-flex shadow-sm rounded-md"},Re={class:"bg-white rounded-lg max-w-md w-full mx-4 p-6"},je={class:"text-gray-600 mb-4"},Ce={class:"mb-4"},qe={class:"flex justify-end space-x-3"},Se=["disabled"],Me={class:"bg-white rounded-lg max-w-md w-full mx-4 p-6"},Ae={class:"text-gray-600 mb-4"},Be={class:"mb-4"},Ne={class:"flex justify-end space-x-3"},Ve=["disabled"],Le={__name:"Index",props:{extensionRequests:Object},setup(d){const f=h(!1),y=h(!1),a=h(null),c=S({owner_notes:""}),x=S({owner_notes:""}),E=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},F=r=>r.charAt(0).toUpperCase()+r.slice(1),D=r=>parseFloat(r||0).toFixed(2),H=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=r=>{a.value=r,c.owner_notes="",f.value=!0},T=r=>{a.value=r,x.owner_notes="",y.value=!0},g=()=>{f.value=!1,y.value=!1,a.value=null},U=()=>{c.post(route("owner.extensionRequests.approve",a.value.id),{onSuccess:()=>{g()}})},$=()=>{x.post(route("owner.extensionRequests.reject",a.value.id),{onSuccess:()=>{g()}})};return(r,t)=>(n(),i(b,null,[M(l(I),{title:"Extension Requests"}),M(O,null,{default:v(()=>{var k,R,j,C;return[e("div",W,[e("div",Y,[t[11]||(t[11]=e("h1",{class:"text-3xl font-bold text-gray-800"}," Extension Requests ",-1)),t[12]||(t[12]=e("p",{class:"text-gray-600 mt-2"}," Manage extension requests for your vehicles ",-1)),e("div",G,[e("div",J,[d.extensionRequests.data.length===0?(n(),i("div",K,t[2]||(t[2]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-lg font-medium text-gray-900"}," No extension requests ",-1),e("p",{class:"mt-1 text-gray-500"}," When renters request to extend their bookings, they will appear here. ",-1)]))):(n(),i("div",Q,[(n(!0),i(b,null,A(d.extensionRequests.data,s=>{var m,q;return n(),i("div",{key:s.id,class:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow"},[e("div",X,[e("div",Z,[t[3]||(t[3]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])])],-1)),e("div",null,[e("h3",ee,o(s.booking.user.name),1),e("p",te,o((m=s.booking.vehicle.brand)==null?void 0:m.name)+" "+o((q=s.booking.vehicle.vehicle_type)==null?void 0:q.name),1),e("p",se," Booking #"+o(s.booking.id),1)])]),e("span",{class:B([E(s.status),"px-3 py-1 rounded-full text-sm font-medium"])},o(F(s.status)),3)]),e("div",oe,[e("div",ne,[e("div",re,[e("p",ie,o(s.requested_hours),1),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"}," Hours Extension ",-1))]),e("div",le,[e("p",de," â‚±"+o(D(s.calculated_cost)),1),t[5]||(t[5]=e("p",{class:"text-sm text-gray-500"}," Additional Cost ",-1))]),e("div",ae,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"}," Requested ",-1)),e("p",ue,o(H(s.created_at)),1)])])]),s.reason?(n(),i("div",ce,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-700 mb-1"}," Reason: ",-1)),e("p",xe,o(s.reason),1)])):u("",!0),s.owner_notes?(n(),i("div",ge,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-700 mb-1"}," Your Notes: ",-1)),e("p",me,o(s.owner_notes),1)])):u("",!0),s.status==="pending"?(n(),i("div",be,[e("button",{onClick:P=>T(s),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"}," Reject ",8,pe),e("button",{onClick:P=>L(s),class:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}," Approve ",8,fe)])):u("",!0)])}),128))])),d.extensionRequests.links?(n(),i("div",ye,[e("nav",he,[e("div",ve,[d.extensionRequests.prev_page_url?(n(),_(l(w),{key:0,href:d.extensionRequests.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:v(()=>t[9]||(t[9]=[N(" Previous ")])),_:1,__:[9]},8,["href"])):u("",!0),d.extensionRequests.next_page_url?(n(),_(l(w),{key:1,href:d.extensionRequests.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:v(()=>t[10]||(t[10]=[N(" Next ")])),_:1,__:[10]},8,["href"])):u("",!0)]),e("div",_e,[e("div",null,[e("p",we," Showing "+o(d.extensionRequests.from)+" to "+o(d.extensionRequests.to)+" of "+o(d.extensionRequests.total)+" results ",1)]),e("div",null,[e("span",ke,[(n(!0),i(b,null,A(d.extensionRequests.links,(s,m)=>(n(),i(b,{key:m},[s&&s.url?(n(),_(l(w),{key:0,href:s.url,class:B([s.active?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):u("",!0)],64))),128))])])])])])):u("",!0)])])])]),f.value?(n(),i("div",{key:0,onClick:p(g,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[e("div",Re,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Approve Extension Request ",-1)),e("p",je," Approve "+o((k=a.value)==null?void 0:k.requested_hours)+" hours extension for Booking #"+o((R=a.value)==null?void 0:R.booking.id)+"? ",1),e("form",{onSubmit:p(U,["prevent"])},[e("div",Ce,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes to renter (optional) ",-1)),V(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(c).owner_notes=s),rows:"3",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-green-500 focus:ring-green-500",placeholder:"Any additional notes or instructions..."},null,512),[[z,l(c).owner_notes]])]),e("div",qe,[e("button",{type:"button",onClick:g,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:l(c).processing,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md disabled:opacity-50"},o(l(c).processing?"Approving...":"Approve"),9,Se)])],32)])])):u("",!0),y.value?(n(),i("div",{key:1,onClick:p(g,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[e("div",Me,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Reject Extension Request ",-1)),e("p",Ae," Reject "+o((j=a.value)==null?void 0:j.requested_hours)+" hours extension for Booking #"+o((C=a.value)==null?void 0:C.booking.id)+"? ",1),e("form",{onSubmit:p($,["prevent"])},[e("div",Be,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Reason for rejection ",-1)),V(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(x).owner_notes=s),rows:"3",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-red-500 focus:ring-red-500",placeholder:"Please explain why you're rejecting this request...",required:""},null,512),[[z,l(x).owner_notes]])]),e("div",Ne,[e("button",{type:"button",onClick:g,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:l(x).processing,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md disabled:opacity-50"},o(l(x).processing?"Rejecting...":"Reject"),9,Ve)])],32)])])):u("",!0)]}),_:1})],64))}};export{Le as default};
