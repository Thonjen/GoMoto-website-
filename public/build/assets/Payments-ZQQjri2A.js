import{r as d,a as h,o,w as b,b as e,f as r,i as a,d as L,u as p,S as w,e as f,g as y,v as F,k as R,F as M,h as N,t as i,n as _,Q as k}from"./app-BJob6Gt2.js";import{A as $}from"./AdminLayout-DlSZqhlc.js";import"./Footer-B-Y8_Xin.js";import"./Header-BZAdlNjp.js";const z={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},O={class:"mb-8"},Q={class:"flex justify-between items-center"},E={class:"glass-card-dark mb-6"},H={class:"px-4 py-5 sm:p-6"},I={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},q={class:"glass-card-dark overflow-hidden"},G={class:"px-4 py-5 sm:p-6"},J={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-white/20"},W={class:"bg-transparent divide-y divide-white/10"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-medium text-white"},Z={class:"text-sm text-white/70"},ee={class:"text-sm text-white/70"},te={class:"px-6 py-4 whitespace-nowrap"},se={key:0},oe={class:"text-sm text-white"},ie={class:"text-sm text-white/70"},re={key:1,class:"text-sm text-white/50"},ne={class:"px-6 py-4 whitespace-nowrap"},le={key:0},ae={class:"text-sm font-medium text-white"},de={class:"text-sm text-white/70"},ue={key:1,class:"text-sm text-white/50"},ce={class:"px-6 py-4 whitespace-nowrap"},me={key:0,class:"text-xs text-red-400"},xe={class:"px-6 py-4 whitespace-nowrap"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-white/70"},be={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},pe={class:"flex space-x-2"},we=["onClick"],fe=["onClick"],ge=["onClick"],ve={key:0,class:"mt-6"},ye={class:"flex items-center justify-between"},_e={class:"flex-1 flex justify-between sm:hidden"},ke={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ce={class:"text-sm text-white/70"},Se={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},je={key:0,class:"fixed inset-0 bg-black/50 overflow-y-auto h-full w-full z-50 backdrop-blur-sm"},Pe={class:"relative top-20 mx-auto p-5 border border-white/20 max-w-lg shadow-glow rounded-xl glass-card-dark"},Ae={class:"mt-3"},Re={class:"text-center"},Me=["src"],Ne={class:"flex justify-end mt-4"},Te={__name:"Payments",props:{payments:Object,filters:Object},setup(n){const g=n,u=d(g.filters.search||""),c=d(g.filters.status||""),m=d(g.filters.type||""),v=d(!1),C=d(""),x=()=>{k.get(route("admin.payments"),{search:u.value,status:c.value,type:m.value},{preserveState:!0,replace:!0})},B=()=>{u.value="",c.value="",m.value="",x()},D=l=>{confirm("Are you sure you want to confirm this payment?")&&k.post(route("admin.payments.confirm",l),{},{onSuccess:()=>{}})},U=l=>{confirm("Are you sure you want to reject this payment?")&&k.post(route("admin.payments.reject",l),{},{onSuccess:()=>{}})},V=l=>{C.value=`/storage/${l}`,v.value=!0},T=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return(l,s)=>(o(),h($,null,{default:b(()=>[e("div",z,[e("div",O,[e("div",Q,[s[5]||(s[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-white"},"Payment Management"),e("p",{class:"mt-2 text-white/70"},"Monitor and manage all payments in the system")],-1)),L(p(w),{href:l.route("admin.dashboard"),class:"bg-white/10 hover:bg-white/20 text-white font-medium py-2 px-4 rounded-md border border-white/20 transition-all duration-200 backdrop-blur-sm shadow-glow"},{default:b(()=>s[4]||(s[4]=[f(" Back to Dashboard ")])),_:1,__:[4]},8,["href"])])]),e("div",E,[e("div",H,[e("div",I,[e("div",null,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Search",-1)),y(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),placeholder:"Search by reference number or user...",class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm",onInput:x},null,544),[[F,u.value]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Status",-1)),y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm",onChange:x},s[7]||(s[7]=[e("option",{value:"",class:"bg-gray-800 text-white"},"All Status",-1),e("option",{value:"pending",class:"bg-gray-800 text-white"},"Pending",-1),e("option",{value:"confirmed",class:"bg-gray-800 text-white"},"Confirmed",-1),e("option",{value:"rejected",class:"bg-gray-800 text-white"},"Rejected",-1),e("option",{value:"refunded",class:"bg-gray-800 text-white"},"Refunded",-1)]),544),[[R,c.value]])]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Type",-1)),y(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t),class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm",onChange:x},s[9]||(s[9]=[e("option",{value:"",class:"bg-gray-800 text-white"},"All Types",-1),e("option",{value:"booking",class:"bg-gray-800 text-white"},"Booking Payment",-1),e("option",{value:"overcharge",class:"bg-gray-800 text-white"},"Overcharge Payment",-1),e("option",{value:"extension",class:"bg-gray-800 text-white"},"Extension Payment",-1),e("option",{value:"refund",class:"bg-gray-800 text-white"},"Refund",-1)]),544),[[R,m.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:B,class:"w-full bg-white/10 hover:bg-white/20 text-white font-medium py-2 px-4 rounded-md border border-white/20 transition-all duration-200 backdrop-blur-sm shadow-glow"}," Clear Filters ")])])])]),e("div",q,[e("div",G,[e("div",J,[e("table",K,[s[11]||(s[11]=e("thead",{class:"bg-white/5"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Payment Details"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Booking"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",W,[(o(!0),r(M,null,N(n.payments.data,t=>{var S,j,P;return o(),r("tr",{key:t.id,class:"hover:bg-white/5 transition-colors duration-150"},[e("td",X,[e("div",null,[e("div",Y,i(t.reference_number||"N/A"),1),e("div",Z,i(t.type),1),e("div",ee,i(((S=t.paymentMode)==null?void 0:S.name)||"Unknown"),1)])]),e("td",te,[t.booking?(o(),r("div",se,[e("div",oe,"Booking #"+i(t.booking.id),1),e("div",ie,i(((j=t.booking.vehicle)==null?void 0:j.license_plate)||"N/A"),1)])):(o(),r("div",re,"No booking"))]),e("td",ne,[(P=t.booking)!=null&&P.user?(o(),r("div",le,[e("div",ae,i(t.booking.user.first_name)+" "+i(t.booking.user.last_name),1),e("div",de,i(t.booking.user.email),1)])):(o(),r("div",ue,"Unknown user"))]),e("td",ce,[e("div",{class:_(["text-sm font-medium",{"text-green-400":t.amount>0,"text-red-400":t.amount<0}])},[f(" â‚±"+i(Math.abs(t.amount).toLocaleString())+" ",1),t.amount<0?(o(),r("span",me,"(Refund)")):a("",!0)],2)]),e("td",xe,[e("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full border backdrop-blur-sm",{"bg-yellow-400/20 text-yellow-300 border-yellow-400/30":t.status==="pending","bg-green-400/20 text-green-300 border-green-400/30":t.status==="confirmed"||t.status==="completed","bg-red-400/20 text-red-300 border-red-400/30":t.status==="rejected","bg-blue-400/20 text-blue-300 border-blue-400/30":t.status==="refunded"}])},i(t.status),3)]),e("td",he,[e("div",null,i(T(t.paid_at||t.created_at)),1)]),e("td",be,[e("div",pe,[t.status==="pending"?(o(),r("button",{key:0,onClick:A=>D(t.id),class:"text-green-400 hover:text-green-300 transition-colors duration-150"}," Confirm ",8,we)):a("",!0),t.status==="pending"?(o(),r("button",{key:1,onClick:A=>U(t.id),class:"text-red-400 hover:text-red-300 transition-colors duration-150"}," Reject ",8,fe)):a("",!0),t.receipt_image?(o(),r("button",{key:2,onClick:A=>V(t.receipt_image),class:"text-blue-400 hover:text-blue-300 transition-colors duration-150"}," View Receipt ",8,ge)):a("",!0)])])])}),128))])])]),n.payments.links?(o(),r("div",ve,[e("nav",ye,[e("div",_e,[n.payments.prev_page_url?(o(),h(p(w),{key:0,href:n.payments.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200"},{default:b(()=>s[12]||(s[12]=[f(" Previous ")])),_:1,__:[12]},8,["href"])):a("",!0),n.payments.next_page_url?(o(),h(p(w),{key:1,href:n.payments.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200"},{default:b(()=>s[13]||(s[13]=[f(" Next ")])),_:1,__:[13]},8,["href"])):a("",!0)]),e("div",ke,[e("div",null,[e("p",Ce," Showing "+i(n.payments.from)+" to "+i(n.payments.to)+" of "+i(n.payments.total)+" results ",1)]),e("div",null,[e("nav",Se,[(o(!0),r(M,null,N(n.payments.links,t=>(o(),h(p(w),{key:t.label,href:t.url||"#",innerHTML:t.label,class:_(["relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded backdrop-blur-sm transition-all duration-200",t.active?"z-10 bg-blue-400/20 border-blue-400/30 text-blue-300":"bg-white/10 border-white/20 text-white/70 hover:bg-white/20 hover:text-white",t.url?"cursor-pointer":"cursor-not-allowed opacity-50"])},null,8,["href","innerHTML","class"]))),128))])])])])])):a("",!0)])]),v.value?(o(),r("div",je,[e("div",Pe,[e("div",Ae,[s[14]||(s[14]=e("h3",{class:"text-lg font-medium text-white mb-4"},"Payment Receipt",-1)),e("div",Re,[e("img",{src:C.value,alt:"Payment Receipt",class:"max-w-full h-auto rounded-lg border border-white/20"},null,8,Me)]),e("div",Ne,[e("button",{onClick:s[3]||(s[3]=t=>v.value=!1),class:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white font-medium rounded-md border border-white/20 transition-all duration-200 backdrop-blur-sm shadow-glow"}," Close ")])])])])):a("",!0)])]),_:1}))}};export{Te as default};
