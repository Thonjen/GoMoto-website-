import{p as I,r as f,j as P,a as y,o,w as v,b as e,f as a,i as r,d as Y,u as d,S as h,e as U,g as _,v as q,F as c,h as w,t as l,k as j,n as M,l as G,Q as k}from"./app-D5PUyAMe.js";import{_ as J}from"./AdminLayout-Bs53sOM1.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";import"./ResponsiveNavLink-BCB-x7oE.js";const K={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},W={class:"mb-8"},X={class:"flex justify-between items-center"},Z={class:"bg-white shadow rounded-lg mb-6"},ee={class:"px-4 py-5 sm:p-6"},te={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},se=["value"],oe={class:"bg-white shadow rounded-lg overflow-hidden"},le={class:"px-4 py-5 sm:p-6"},ae={class:"overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200"},re={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap"},de={class:"flex items-center"},ue={class:"flex-shrink-0 h-10 w-10"},ce={class:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"},me={class:"text-sm font-medium text-gray-700"},xe={class:"ml-4"},pe={class:"text-sm font-medium text-gray-900"},ge={class:"text-sm text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm text-gray-900"},ye={class:"text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_e={class:"px-6 py-4 whitespace-nowrap"},we={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ke={class:"flex space-x-2"},Se=["onClick"],Ce=["onClick"],Ue=["onClick"],je={key:2,class:"text-gray-500 text-sm"},Me={key:3,class:"text-gray-500 text-sm"},Ve={key:0,class:"mt-6"},Ae={class:"flex items-center justify-between"},Be={class:"flex-1 flex justify-between sm:hidden"},Ne={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Fe={class:"text-sm text-gray-700"},Re={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},$e={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ze={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},De={class:"mt-3"},Ee={class:"mb-4"},Te=["value"],Le={class:"flex justify-end space-x-2"},qe={__name:"Users",props:{users:Object,roles:Array,filters:Object},setup(n){const S=n,C=I().props.auth.user,m=f(S.filters.search||""),x=f(S.filters.role||""),p=f(S.filters.status||""),g=f(!1),u=P({}),b=()=>{k.get(route("admin.users"),{search:m.value,role:x.value,status:p.value},{preserveState:!0,replace:!0})},T=()=>{m.value="",x.value="",p.value="",b()},L=i=>{confirm("Are you sure you want to ban this user?")&&k.post(route("admin.users.ban",i),{},{onSuccess:()=>{}})},O=i=>{k.post(route("admin.users.unban",i),{},{onSuccess:()=>{}})},Q=i=>{Object.assign(u,i),g.value=!0},H=()=>{k.post(route("admin.users.update-role",u.id),{role_id:u.role_id},{onSuccess:()=>{g.value=!1}})};return(i,s)=>(o(),y(J,null,{default:v(()=>[e("div",K,[e("div",W,[e("div",X,[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"User Management"),e("p",{class:"mt-2 text-gray-600"},"Manage all users in the system")],-1)),Y(d(h),{href:i.route("admin.dashboard"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:v(()=>s[5]||(s[5]=[U(" Back to Dashboard ")])),_:1,__:[5]},8,["href"])])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),_(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),placeholder:"Search by name, email, or phone...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",onInput:b},null,544),[[q,m.value]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:b},[s[8]||(s[8]=e("option",{value:""},"All Roles",-1)),(o(!0),a(c,null,w(n.roles,t=>(o(),a("option",{key:t.id,value:t.name},l(t.name),9,se))),128))],544),[[j,x.value]])]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),_(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>p.value=t),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:b},s[10]||(s[10]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"banned"},"Banned",-1),e("option",{value:"suspended"},"Suspended",-1)]),544),[[j,p.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:T,class:"w-full bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Clear Filters ")])])])]),e("div",oe,[e("div",le,[e("div",ae,[e("table",ne,[s[12]||(s[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statistics"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",re,[(o(!0),a(c,null,w(n.users.data,t=>{var V,A,B,N,F,R,$,z,D;return o(),a("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",ie,[e("div",de,[e("div",ue,[e("div",ce,[e("span",me,l((V=t.first_name)==null?void 0:V[0])+l((A=t.last_name)==null?void 0:A[0]),1)])]),e("div",xe,[e("div",pe,l(t.first_name)+" "+l(t.last_name),1),e("div",ge,"ID: "+l(t.id),1)])])]),e("td",be,[e("div",fe,l(t.email),1),e("div",ye,l(t.phone||"No phone"),1)]),e("td",ve,[e("span",{class:M(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-blue-100 text-blue-800":((B=t.role)==null?void 0:B.name)==="customer","bg-green-100 text-green-800":((N=t.role)==null?void 0:N.name)==="owner","bg-purple-100 text-purple-800":((F=t.role)==null?void 0:F.name)==="admin"}])},l(((R=t.role)==null?void 0:R.name)||"No role"),3)]),e("td",he,[e("div",null,l(t.vehicles_count||0)+" vehicles",1),e("div",null,l(t.bookings_count||0)+" bookings",1)]),e("td",_e,[e("span",{class:M(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":t.status==="active"||!t.status,"bg-red-100 text-red-800":t.status==="banned","bg-yellow-100 text-yellow-800":t.status==="suspended"}])},l(t.status||"active"),3)]),e("td",we,[e("div",ke,[(($=t.role)==null?void 0:$.name)!=="admin"&&t.id!==d(C).id?(o(),a(c,{key:0},[t.status!=="banned"?(o(),a("button",{key:0,onClick:E=>L(t.id),class:"text-red-600 hover:text-red-900"}," Ban ",8,Se)):r("",!0),t.status==="banned"?(o(),a("button",{key:1,onClick:E=>O(t.id),class:"text-green-600 hover:text-green-900"}," Unban ",8,Ce)):r("",!0)],64)):r("",!0),((z=t.role)==null?void 0:z.name)!=="admin"&&t.id!==d(C).id?(o(),a("button",{key:1,onClick:E=>Q(t),class:"text-blue-600 hover:text-blue-900"}," Edit ",8,Ue)):r("",!0),t.id===d(C).id?(o(),a("span",je," (You) ")):((D=t.role)==null?void 0:D.name)==="admin"?(o(),a("span",Me," (Administrator) ")):r("",!0)])])])}),128))])])]),n.users.links?(o(),a("div",Ve,[e("nav",Ae,[e("div",Be,[n.users.prev_page_url?(o(),y(d(h),{key:0,href:n.users.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:v(()=>s[13]||(s[13]=[U(" Previous ")])),_:1,__:[13]},8,["href"])):r("",!0),n.users.next_page_url?(o(),y(d(h),{key:1,href:n.users.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:v(()=>s[14]||(s[14]=[U(" Next ")])),_:1,__:[14]},8,["href"])):r("",!0)]),e("div",Ne,[e("div",null,[e("p",Fe," Showing "+l(n.users.from)+" to "+l(n.users.to)+" of "+l(n.users.total)+" results ",1)]),e("div",null,[e("nav",Re,[(o(!0),a(c,null,w(n.users.links,t=>(o(),y(d(h),{key:t.label,href:t.url||"#",innerHTML:t.label,class:M(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",t.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50",t.url?"cursor-pointer":"cursor-not-allowed opacity-50"])},null,8,["href","innerHTML","class"]))),128))])])])])])):r("",!0)])]),g.value?(o(),a("div",$e,[e("div",ze,[e("div",De,[s[17]||(s[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit User",-1)),e("form",{onSubmit:G(H,["prevent"])},[e("div",Ee,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),_(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>u.role_id=t),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(o(!0),a(c,null,w(n.roles,t=>(o(),a("option",{key:t.id,value:t.id},l(t.name),9,Te))),128))],512),[[j,u.role_id]])]),e("div",Le,[e("button",{type:"button",onClick:s[4]||(s[4]=t=>g.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"}," Cancel "),s[16]||(s[16]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Update ",-1))])],32)])])])):r("",!0)])]),_:1}))}};export{qe as default};
