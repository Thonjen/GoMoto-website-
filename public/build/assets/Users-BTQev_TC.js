import{p as I,r as w,j as P,a as f,o,w as g,b as e,f as i,i as r,d as Y,u as d,S as v,e as U,g as y,v as q,F as m,h as _,t as l,k as j,n as A,l as G,Q as k}from"./app-Bp2smfCm.js";import{A as J}from"./AdminLayout-CaUpGq0C.js";import"./Footer-BrurEhWM.js";import"./Header-fek8bTNe.js";const K={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},W={class:"mb-8"},X={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Z={class:"glass-card-dark mb-6 mx-2 sm:mx-0"},ee={class:"px-4 py-5 sm:p-6"},te={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},se=["value"],oe={class:"glass-card-dark overflow-hidden mx-2 sm:mx-0"},le={class:"px-2 py-4 sm:px-4 sm:py-5 lg:p-6"},ie={class:"overflow-x-auto"},ne={class:"min-w-full divide-y divide-white/20"},re={class:"bg-transparent divide-y divide-white/10"},ae={class:"px-3 sm:px-6 py-4"},de={class:"flex items-center"},ue={class:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10"},me={class:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-white/20 flex items-center justify-center border border-white/20 backdrop-blur-sm"},ce={class:"text-xs sm:text-sm font-medium text-white"},xe={class:"ml-2 sm:ml-4"},be={class:"text-xs sm:text-sm font-medium text-white truncate"},pe={class:"text-xs text-white/70 sm:hidden"},he={class:"text-xs sm:text-sm text-white/70 hidden sm:block"},we={class:"px-3 sm:px-6 py-4 whitespace-nowrap hidden sm:table-cell"},fe={class:"text-sm text-white"},ge={class:"text-sm text-white/70"},ve={class:"px-3 sm:px-6 py-4 whitespace-nowrap"},ye={class:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-white/70 hidden lg:table-cell"},_e={class:"px-3 sm:px-6 py-4 whitespace-nowrap"},ke={class:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium"},Se={class:"flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-2"},Ce=["onClick"],Ue=["onClick"],je=["onClick"],Ae={key:2,class:"text-white/50 text-xs sm:text-sm"},Me={key:3,class:"text-white/50 text-xs sm:text-sm"},Ve={key:0,class:"mt-6 px-2 sm:px-0"},Be={class:"flex items-center justify-between"},Ne={class:"flex-1 flex justify-between sm:hidden"},Fe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Re={class:"text-sm text-white/70"},ze={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},De={key:0,class:"fixed inset-0 bg-black/50 overflow-y-auto h-full w-full z-50 backdrop-blur-sm"},Ee={class:"relative top-10 sm:top-20 mx-4 sm:mx-auto p-4 sm:p-5 border border-white/20 w-auto sm:w-96 shadow-glow rounded-xl glass-card-dark"},Le={class:"mt-3"},Te={class:"mb-4"},$e=["value"],Oe={class:"flex justify-end space-x-2"},qe={__name:"Users",props:{users:Object,roles:Array,filters:Object},setup(n){const S=n,C=I().props.auth.user,c=w(S.filters.search||""),x=w(S.filters.role||""),b=w(S.filters.status||""),p=w(!1),u=P({}),h=()=>{k.get(route("admin.users"),{search:c.value,role:x.value,status:b.value},{preserveState:!0,replace:!0})},T=()=>{c.value="",x.value="",b.value="",h()},$=a=>{confirm("Are you sure you want to ban this user?")&&k.post(route("admin.users.ban",a),{},{onSuccess:()=>{}})},O=a=>{k.post(route("admin.users.unban",a),{},{onSuccess:()=>{}})},Q=a=>{Object.assign(u,a),p.value=!0},H=()=>{k.post(route("admin.users.update-role",u.id),{role_id:u.role_id},{onSuccess:()=>{p.value=!1}})};return(a,s)=>(o(),f(J,null,{default:g(()=>[e("div",K,[e("div",W,[e("div",X,[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-2xl sm:text-3xl font-bold text-white"},"User Management"),e("p",{class:"mt-2 text-white/70"},"Manage all users in the system")],-1)),Y(d(v),{href:a.route("admin.dashboard"),class:"bg-white/10 hover:bg-white/20 text-white font-medium py-2 px-4 rounded-md border border-white/20 transition-all duration-200 backdrop-blur-sm shadow-glow whitespace-nowrap"},{default:g(()=>s[5]||(s[5]=[U(" Back to Dashboard ")])),_:1,__:[5]},8,["href"])])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Search",-1)),y(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),placeholder:"Search by name, email, or phone...",class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm",onInput:h},null,544),[[q,c.value]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Role",-1)),y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm",onChange:h},[s[8]||(s[8]=e("option",{value:"",class:"bg-gray-800 text-white"},"All Roles",-1)),(o(!0),i(m,null,_(n.roles,t=>(o(),i("option",{key:t.id,value:t.name,class:"bg-gray-800 text-white"},l(t.name),9,se))),128))],544),[[j,x.value]])]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Status",-1)),y(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>b.value=t),class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm",onChange:h},s[10]||(s[10]=[e("option",{value:"",class:"bg-gray-800 text-white"},"All Status",-1),e("option",{value:"active",class:"bg-gray-800 text-white"},"Active",-1),e("option",{value:"banned",class:"bg-gray-800 text-white"},"Banned",-1),e("option",{value:"suspended",class:"bg-gray-800 text-white"},"Suspended",-1)]),544),[[j,b.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:T,class:"w-full bg-white/10 hover:bg-white/20 text-white font-medium py-2 px-4 rounded-md border border-white/20 transition-all duration-200 backdrop-blur-sm shadow-glow"}," Clear Filters ")])])])]),e("div",oe,[e("div",le,[e("div",ie,[e("table",ne,[s[12]||(s[12]=e("thead",{class:"bg-white/5"},[e("tr",null,[e("th",{class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"User"),e("th",{class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider hidden sm:table-cell"},"Contact"),e("th",{class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Role"),e("th",{class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider hidden lg:table-cell"},"Statistics"),e("th",{class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Status"),e("th",{class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",re,[(o(!0),i(m,null,_(n.users.data,t=>{var M,V,B,N,F,R,z,D,E;return o(),i("tr",{key:t.id,class:"hover:bg-white/5 transition-colors duration-150"},[e("td",ae,[e("div",de,[e("div",ue,[e("div",me,[e("span",ce,l((M=t.first_name)==null?void 0:M[0])+l((V=t.last_name)==null?void 0:V[0]),1)])]),e("div",xe,[e("div",be,l(t.first_name)+" "+l(t.last_name),1),e("div",pe,l(t.email),1),e("div",he,"ID: "+l(t.id),1)])])]),e("td",we,[e("div",fe,l(t.email),1),e("div",ge,l(t.phone||"No phone"),1)]),e("td",ve,[e("span",{class:A(["px-1 sm:px-2 inline-flex text-xs leading-4 sm:leading-5 font-semibold rounded-full border backdrop-blur-sm",{"bg-yellow-400/20 text-yellow-300 border-yellow-400/30":((B=t.role)==null?void 0:B.name)==="renter","bg-green-400/20 text-green-300 border-green-400/30":((N=t.role)==null?void 0:N.name)==="owner","bg-purple-400/20 text-purple-300 border-purple-400/30":((F=t.role)==null?void 0:F.name)==="admin"}])},l(((R=t.role)==null?void 0:R.name)||"No role"),3)]),e("td",ye,[e("div",null,l(t.vehicles_count||0)+" vehicles",1),e("div",null,l(t.bookings_count||0)+" bookings",1)]),e("td",_e,[e("span",{class:A(["px-1 sm:px-2 inline-flex text-xs leading-4 sm:leading-5 font-semibold rounded-full border backdrop-blur-sm",{"bg-green-400/20 text-green-300 border-green-400/30":t.status==="active"||!t.status,"bg-red-400/20 text-red-300 border-red-400/30":t.status==="banned","bg-yellow-400/20 text-yellow-300 border-yellow-400/30":t.status==="suspended"}])},l(t.status||"active"),3)]),e("td",ke,[e("div",Se,[((z=t.role)==null?void 0:z.name)!=="admin"&&t.id!==d(C).id?(o(),i(m,{key:0},[t.status!=="banned"?(o(),i("button",{key:0,onClick:L=>$(t.id),class:"text-red-400 hover:text-red-300 transition-colors duration-150 text-left"}," Ban ",8,Ce)):r("",!0),t.status==="banned"?(o(),i("button",{key:1,onClick:L=>O(t.id),class:"text-green-400 hover:text-green-300 transition-colors duration-150 text-left"}," Unban ",8,Ue)):r("",!0)],64)):r("",!0),((D=t.role)==null?void 0:D.name)!=="admin"&&t.id!==d(C).id?(o(),i("button",{key:1,onClick:L=>Q(t),class:"text-blue-400 hover:text-blue-300 transition-colors duration-150 text-left"}," Edit ",8,je)):r("",!0),t.id===d(C).id?(o(),i("span",Ae," (You) ")):((E=t.role)==null?void 0:E.name)==="admin"?(o(),i("span",Me," (Admin) ")):r("",!0)])])])}),128))])])]),n.users.links?(o(),i("div",Ve,[e("nav",Be,[e("div",Ne,[n.users.prev_page_url?(o(),f(d(v),{key:0,href:n.users.prev_page_url,class:"relative inline-flex items-center px-3 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200"},{default:g(()=>s[13]||(s[13]=[U(" Previous ")])),_:1,__:[13]},8,["href"])):r("",!0),n.users.next_page_url?(o(),f(d(v),{key:1,href:n.users.next_page_url,class:"relative inline-flex items-center px-3 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200"},{default:g(()=>s[14]||(s[14]=[U(" Next ")])),_:1,__:[14]},8,["href"])):r("",!0)]),e("div",Fe,[e("div",null,[e("p",Re," Showing "+l(n.users.from)+" to "+l(n.users.to)+" of "+l(n.users.total)+" results ",1)]),e("div",null,[e("nav",ze,[(o(!0),i(m,null,_(n.users.links,t=>(o(),f(d(v),{key:t.label,href:t.url||"#",innerHTML:t.label,class:A(["relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded backdrop-blur-sm transition-all duration-200",t.active?"z-10 bg-blue-400/20 border-blue-400/30 text-blue-300":"bg-white/10 border-white/20 text-white/70 hover:bg-white/20 hover:text-white",t.url?"cursor-pointer":"cursor-not-allowed opacity-50"])},null,8,["href","innerHTML","class"]))),128))])])])])])):r("",!0)])]),p.value?(o(),i("div",De,[e("div",Ee,[e("div",Le,[s[17]||(s[17]=e("h3",{class:"text-lg font-medium text-white mb-4"},"Edit User",-1)),e("form",{onSubmit:G(H,["prevent"])},[e("div",Te,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Role",-1)),y(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>u.role_id=t),class:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm"},[(o(!0),i(m,null,_(n.roles,t=>(o(),i("option",{key:t.id,value:t.id,class:"bg-gray-800 text-white"},l(t.name),9,$e))),128))],512),[[j,u.role_id]])]),e("div",Oe,[e("button",{type:"button",onClick:s[4]||(s[4]=t=>p.value=!1),class:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white font-medium rounded-md border border-white/20 transition-all duration-200 backdrop-blur-sm shadow-glow"}," Cancel "),s[16]||(s[16]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-400/20 hover:bg-blue-400/30 text-blue-300 font-medium rounded-md border border-blue-400/30 transition-all duration-200 backdrop-blur-sm shadow-glow"}," Update ",-1))])],32)])])])):r("",!0)])]),_:1}))}};export{qe as default};
