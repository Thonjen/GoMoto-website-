import{_ as p,r as c,c as f,f as i,o as n,b as d,i as v,n as h,t as g}from"./app-Bp2smfCm.js";const x=["disabled","title"],S={class:"relative"},b=["fill"],C={key:0,class:"absolute inset-0 flex items-center justify-center"},k={key:0,class:"ml-1"},N={key:1,class:"text-xs opacity-75"},z={__name:"SaveButton",props:{vehicleId:{type:[Number,String],required:!0},initialSaved:{type:Boolean,default:!1},initialSaveCount:{type:Number,default:0},listName:{type:String,default:"My Saved Vehicles"},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},showText:{type:Boolean,default:!0},showCount:{type:Boolean,default:!1}},emits:["saved","unsaved","error"],setup(e,{expose:w,emit:y}){const a=e,u=y,s=c(a.initialSaved),r=c(a.initialSaveCount),o=c(!1),m=async()=>{if(!o.value){o.value=!0;try{const l=await fetch("/api/vehicles/save/toggle",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({vehicle_id:a.vehicleId,list_name:a.listName})});if(!l.ok)throw new Error("Failed to toggle save status");const t=await l.json();s.value=t.saved,r.value=t.save_count,t.saved?u("saved",{vehicleId:a.vehicleId,listName:a.listName,saveCount:t.save_count}):u("unsaved",{vehicleId:a.vehicleId,listName:a.listName,saveCount:t.save_count}),window.showToast&&window.showToast(t.message,t.saved?"success":"info")}catch(l){console.error("Error toggling save status:",l),u("error",l),window.showToast&&window.showToast("Failed to update save status. Please try again.","error")}finally{o.value=!1}}};return w({toggleSave:m,saved:f(()=>s.value),saveCount:f(()=>r.value)}),(l,t)=>(n(),i("button",{onClick:m,disabled:o.value,class:h(["flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 backdrop-blur-sm border shadow-lg",s.value?"bg-red-500/90 text-white hover:bg-red-600 focus:ring-red-400 border-red-500 shadow-red-500/25":"bg-gray-800/90 text-white hover:bg-gray-700 focus:ring-gray-500 border-gray-600 shadow-gray-800/25",o.value&&"opacity-50 cursor-not-allowed",e.size==="sm"&&"px-2 py-1 text-xs",e.size==="lg"&&"px-4 py-3 text-base"]),title:s.value?`Remove from ${e.listName}`:`Save to ${e.listName}`},[d("div",S,[(n(),i("svg",{class:h(["transition-all duration-200",e.size==="sm"?"w-3 h-3":e.size==="lg"?"w-6 h-6":"w-4 h-4",s.value?"text-white scale-110":"text-white"]),fill:s.value?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[0]||(t[0]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)]),10,b)),o.value?(n(),i("div",C,[(n(),i("svg",{class:h(["animate-spin",e.size==="sm"?"w-3 h-3":e.size==="lg"?"w-6 h-6":"w-4 h-4"]),fill:"none",viewBox:"0 0 24 24"},t[1]||(t[1]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2))])):v("",!0)]),e.showText?(n(),i("span",k,g(s.value?"Saved":"Save"),1)):v("",!0),e.showCount&&r.value>0?(n(),i("span",N," ("+g(r.value)+") ",1)):v("",!0)],10,x))}},T=p(z,[["__scopeId","data-v-2f05cd73"]]);export{T as S};
