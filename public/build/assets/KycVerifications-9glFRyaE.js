import{r as h,j,a as _,o as l,w as x,b as e,f as n,i,d as $,u as v,S as g,e as u,t as r,g as w,v as C,k as q,F as S,h as F,n as R,l as T,Q as U}from"./app-D5PUyAMe.js";import{_ as E}from"./AdminLayout-Bs53sOM1.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";import"./ResponsiveNavLink-BCB-x7oE.js";const I={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Q={class:"mb-8"},G={class:"flex justify-between items-center"},J={class:"flex space-x-4"},W={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},X={class:"bg-white overflow-hidden shadow rounded-lg"},Z={class:"p-5"},ee={class:"flex items-center"},te={class:"ml-5 w-0 flex-1"},se={class:"text-lg font-medium text-gray-900"},oe={class:"bg-white overflow-hidden shadow rounded-lg"},le={class:"p-5"},re={class:"flex items-center"},ne={class:"ml-5 w-0 flex-1"},ie={class:"text-lg font-medium text-gray-900"},de={class:"bg-white overflow-hidden shadow rounded-lg"},ae={class:"p-5"},ue={class:"flex items-center"},ce={class:"ml-5 w-0 flex-1"},me={class:"text-lg font-medium text-gray-900"},xe={class:"bg-white overflow-hidden shadow rounded-lg"},ve={class:"p-5"},ge={class:"flex items-center"},pe={class:"ml-5 w-0 flex-1"},fe={class:"text-lg font-medium text-gray-900"},be={class:"bg-white shadow rounded-lg mb-6"},ye={class:"px-4 py-5 sm:p-6"},he={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_e={class:"bg-white shadow rounded-lg"},we={class:"px-4 py-5 sm:p-6"},ke={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200"},Ce={class:"bg-white divide-y divide-gray-200"},Se={class:"px-6 py-4 whitespace-nowrap"},Re={class:"flex items-center"},Ue={class:"flex-shrink-0 h-10 w-10"},Be={class:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"},Me={class:"text-sm font-medium text-gray-700"},Ae={class:"ml-4"},De={class:"text-sm font-medium text-gray-900"},Ve={class:"text-sm text-gray-500"},Ne={class:"px-6 py-4 whitespace-nowrap"},Le={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},$e={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"flex space-x-2"},He={key:0,class:"text-green-600"},Ke={key:1,class:"text-red-600"},Oe={key:2,class:"text-green-600"},Pe={key:3,class:"text-red-600"},Ye={key:4,class:"text-green-600"},qe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ee={class:"flex space-x-2"},Ie=["onClick"],Qe=["onClick"],Ge=["onClick"],Je={class:"mt-6"},We={class:"flex items-center justify-between"},Xe={class:"flex-1 flex justify-between sm:hidden"},Ze={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},et={class:"text-sm text-gray-700"},tt={class:"flex space-x-1"},st=["innerHTML"],ot={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},lt={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white"},rt={class:"mt-3"},nt={class:"flex justify-between items-center mb-4"},it={class:"text-lg font-medium text-gray-900"},dt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},at={class:"space-y-2 text-sm"},ut={key:0},ct={key:1,class:"text-red-600"},mt={class:"space-y-4"},xt={key:0},vt=["src"],gt={key:1},pt=["src"],ft={key:2},bt={class:"mt-6 flex justify-end space-x-3"},yt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ht={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},_t={class:"mb-4"},wt={class:"flex justify-end space-x-3"},kt={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},jt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Ct={class:"mb-4"},St={class:"flex justify-end space-x-3"},Dt={__name:"KycVerifications",props:{users:Object,stats:Object,filters:Object},setup(d){const B=d,o=h(null),p=h(!1),f=h(!1),m=h(null),c=j({search:B.filters.search||"",status:B.filters.status||""}),b=j({reason:""}),y=j({reason:""});let M=null;const z=()=>{clearTimeout(M),M=setTimeout(()=>{k()},300)},k=()=>{U.get(route("admin.kyc.verifications"),c,{preserveState:!0,replace:!0})},H=()=>{c.search="",c.status="",k()},K=a=>{o.value=a},A=a=>{m.value=a,b.reason="",p.value=!0},D=a=>{m.value=a,y.reason="",f.value=!0},O=()=>{U.post(route("admin.kyc.approve",m.value.id),b,{onSuccess:()=>{p.value=!1,o.value=null,m.value=null}})},P=()=>{U.post(route("admin.kyc.reject",m.value.id),y,{onSuccess:()=>{f.value=!1,o.value=null,m.value=null}})},Y=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(a,t)=>(l(),_(E,null,{default:x(()=>{var V;return[e("div",I,[e("div",Q,[e("div",G,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"KYC Verifications"),e("p",{class:"mt-2 text-gray-600"},"Review and manage user verification requests")],-1)),e("div",J,[$(v(g),{href:a.route("admin.kyc.logs"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:x(()=>t[10]||(t[10]=[u(" View Logs ")])),_:1,__:[10]},8,["href"]),$(v(g),{href:a.route("admin.dashboard"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:x(()=>t[11]||(t[11]=[u(" Back to Dashboard ")])),_:1,__:[11]},8,["href"])])])]),e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",te,[e("dl",null,[t[13]||(t[13]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending Review",-1)),e("dd",se,r(d.stats.pending_review),1)])])])])]),e("div",oe,[e("div",le,[e("div",re,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ne,[e("dl",null,[t[15]||(t[15]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Approved",-1)),e("dd",ie,r(d.stats.approved),1)])])])])]),e("div",de,[e("div",ae,[e("div",ue,[t[18]||(t[18]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ce,[e("dl",null,[t[17]||(t[17]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Rejected",-1)),e("dd",me,r(d.stats.rejected),1)])])])])]),e("div",xe,[e("div",ve,[e("div",ge,[t[20]||(t[20]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",pe,[e("dl",null,[t[19]||(t[19]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Submissions",-1)),e("dd",fe,r(d.stats.total_submissions),1)])])])])])]),e("div",be,[e("div",ye,[e("div",he,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Search Users",-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.search=s),onInput:z,type:"text",placeholder:"Name or email...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,544),[[C,c.search]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.status=s),onChange:k,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},t[22]||(t[22]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"under_review"},"Under Review",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)]),544),[[q,c.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:H,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Clear Filters ")])])])]),e("div",_e,[e("div",we,[e("div",ke,[e("table",je,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Submitted"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Documents"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ce,[(l(!0),n(S,null,F(d.users.data,s=>{var N;return l(),n("tr",{key:s.id},[e("td",Se,[e("div",Re,[e("div",Ue,[e("div",Be,[e("span",Me,r(s.first_name[0])+r(s.last_name[0]),1)])]),e("div",Ae,[e("div",De,r(s.first_name)+" "+r(s.last_name),1),e("div",Ve,r(s.email),1)])])]),e("td",Ne,[e("span",Le,r(((N=s.role)==null?void 0:N.name)||"N/A"),1)]),e("td",$e,[e("span",{class:R(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.kyc_status==="approved"?"bg-green-100 text-green-800":s.kyc_status==="under_review"?"bg-blue-100 text-blue-800":s.kyc_status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},r(s.kyc_status.replace("_"," ").toUpperCase()),3)]),e("td",Fe,r(s.license_submitted_at?Y(s.license_submitted_at):"Not submitted"),1),e("td",Te,[e("div",ze,[s.drivers_license_front?(l(),n("span",He,"✓ Front")):(l(),n("span",Ke,"✗ Front")),s.drivers_license_back?(l(),n("span",Oe,"✓ Back")):(l(),n("span",Pe,"✗ Back")),s.bio?(l(),n("span",Ye,"✓ Bio")):i("",!0)])]),e("td",qe,[e("div",Ee,[e("button",{onClick:L=>K(s),class:"text-blue-600 hover:text-blue-900"}," View ",8,Ie),s.kyc_status==="under_review"?(l(),n("button",{key:0,onClick:L=>A(s),class:"text-green-600 hover:text-green-900"}," Approve ",8,Qe)):i("",!0),s.kyc_status==="under_review"?(l(),n("button",{key:1,onClick:L=>D(s),class:"text-red-600 hover:text-red-900"}," Reject ",8,Ge)):i("",!0)])])])}),128))])])]),e("div",Je,[e("nav",We,[e("div",Xe,[d.users.prev_page_url?(l(),_(v(g),{key:0,href:d.users.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500"},{default:x(()=>t[25]||(t[25]=[u(" Previous ")])),_:1,__:[25]},8,["href"])):i("",!0),d.users.next_page_url?(l(),_(v(g),{key:1,href:d.users.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500"},{default:x(()=>t[26]||(t[26]=[u(" Next ")])),_:1,__:[26]},8,["href"])):i("",!0)]),e("div",Ze,[e("div",null,[e("p",et," Showing "+r(d.users.from||0)+" to "+r(d.users.to||0)+" of "+r(d.users.total)+" results ",1)]),e("div",tt,[(l(!0),n(S,null,F(d.users.links,s=>(l(),n(S,{key:s.label},[s.url?(l(),_(v(g),{key:0,href:s.url,innerHTML:s.label,class:R(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},null,8,["href","innerHTML","class"])):(l(),n("span",{key:1,innerHTML:s.label,class:"relative inline-flex items-center px-4 py-2 border text-sm font-medium cursor-not-allowed opacity-50 bg-white border-gray-300 text-gray-500"},null,8,st))],64))),128))])])])])])]),o.value?(l(),n("div",ot,[e("div",lt,[e("div",rt,[e("div",nt,[e("h3",it," KYC Details - "+r(o.value.first_name)+" "+r(o.value.last_name),1),e("button",{onClick:t[2]||(t[2]=s=>o.value=null),class:"text-gray-400 hover:text-gray-600"},t[27]||(t[27]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",dt,[e("div",null,[t[35]||(t[35]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"User Information",-1)),e("div",at,[e("div",null,[t[28]||(t[28]=e("strong",null,"Name:",-1)),u(" "+r(o.value.first_name)+" "+r(o.value.last_name),1)]),e("div",null,[t[29]||(t[29]=e("strong",null,"Email:",-1)),u(" "+r(o.value.email),1)]),e("div",null,[t[30]||(t[30]=e("strong",null,"Phone:",-1)),u(" "+r(o.value.phone||"Not provided"),1)]),e("div",null,[t[31]||(t[31]=e("strong",null,"Role:",-1)),u(" "+r(((V=o.value.role)==null?void 0:V.name)||"N/A"),1)]),e("div",null,[t[32]||(t[32]=e("strong",null,"Status:",-1)),e("span",{class:R(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ml-1",o.value.kyc_status==="approved"?"bg-green-100 text-green-800":o.value.kyc_status==="under_review"?"bg-blue-100 text-blue-800":o.value.kyc_status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},r(o.value.kyc_status.replace("_"," ").toUpperCase()),3)]),o.value.bio?(l(),n("div",ut,[t[33]||(t[33]=e("strong",null,"Bio:",-1)),u(" "+r(o.value.bio),1)])):i("",!0),o.value.kyc_rejection_reason?(l(),n("div",ct,[t[34]||(t[34]=e("strong",null,"Rejection Reason:",-1)),u(" "+r(o.value.kyc_rejection_reason),1)])):i("",!0)])]),e("div",null,[t[39]||(t[39]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Uploaded Documents",-1)),e("div",mt,[o.value.drivers_license_front?(l(),n("div",xt,[t[36]||(t[36]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Driver's License (Front)",-1)),e("img",{src:`/storage/${o.value.drivers_license_front}`,alt:"Driver's License Front",class:"max-w-full h-48 object-contain border rounded"},null,8,vt)])):i("",!0),o.value.drivers_license_back?(l(),n("div",gt,[t[37]||(t[37]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Driver's License (Back)",-1)),e("img",{src:`/storage/${o.value.drivers_license_back}`,alt:"Driver's License Back",class:"max-w-full h-48 object-contain border rounded"},null,8,pt)])):i("",!0),!o.value.drivers_license_front&&!o.value.drivers_license_back?(l(),n("div",ft,t[38]||(t[38]=[e("p",{class:"text-gray-500"},"No documents uploaded",-1)]))):i("",!0)])])]),e("div",bt,[e("button",{onClick:t[3]||(t[3]=s=>o.value=null),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Close "),o.value.kyc_status==="under_review"?(l(),n("button",{key:0,onClick:t[4]||(t[4]=s=>D(o.value)),class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"}," Reject ")):i("",!0),o.value.kyc_status==="under_review"?(l(),n("button",{key:1,onClick:t[5]||(t[5]=s=>A(o.value)),class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"}," Approve ")):i("",!0)])])])])):i("",!0),p.value?(l(),n("div",yt,[e("div",ht,[t[42]||(t[42]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Approve KYC",-1)),e("form",{onSubmit:T(O,["prevent"])},[e("div",_t,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Approval Notes (Optional) ",-1)),w(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>b.reason=s),rows:"3",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Add any notes about the approval..."},null,512),[[C,b.reason]])]),e("div",wt,[e("button",{type:"button",onClick:t[7]||(t[7]=s=>p.value=!1),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Cancel "),t[41]||(t[41]=e("button",{type:"submit",class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"}," Approve ",-1))])],32)])])):i("",!0),f.value?(l(),n("div",kt,[e("div",jt,[t[45]||(t[45]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reject KYC",-1)),e("form",{onSubmit:T(P,["prevent"])},[e("div",Ct,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Rejection Reason * ",-1)),w(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>y.reason=s),rows:"3",required:"",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Please provide a clear reason for rejection..."},null,512),[[C,y.reason]])]),e("div",St,[e("button",{type:"button",onClick:t[9]||(t[9]=s=>f.value=!1),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Cancel "),t[44]||(t[44]=e("button",{type:"submit",class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"}," Reject ",-1))])],32)])])):i("",!0)])]}),_:1}))}};export{Dt as default};
