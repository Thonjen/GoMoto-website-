import{x as _,f as i,o as n,d as b,u as s,y as h,w as f,b as e,i as x,t as l,l as w,g as u,z as k,v as m,S,e as O,F as p,h as F,n as V}from"./app-D5PUyAMe.js";import{_ as C}from"./OwnerLayout-R8EC1rpz.js";import"./ResponsiveNavLink-BCB-x7oE.js";import"./Footer-DI0umZVU.js";import"./Header-DdPT2WJT.js";const U={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6 text-gray-900"},j={class:"w-full px-0 space-y-6"},B={key:0,class:"bg-white rounded-lg shadow-sm border p-6"},z={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},D={class:"text-center p-3 bg-green-50 rounded-lg"},M={class:"text-2xl font-bold text-green-600"},P={class:"text-center p-3 bg-yellow-50 rounded-lg"},T={class:"text-2xl font-bold text-yellow-600"},A={class:"text-center p-3 bg-red-50 rounded-lg"},E={class:"text-2xl font-bold text-red-600"},L={class:"text-center p-3 bg-blue-50 rounded-lg"},N={class:"text-2xl font-bold text-blue-600"},H={class:"bg-white rounded-lg shadow-sm border p-6"},G={class:"flex items-center justify-between pb-4 border-b"},I={class:"relative inline-flex items-center cursor-pointer"},K={key:0,class:"space-y-8"},Y={class:"relative"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},q={class:"relative"},J={class:"relative"},Q={class:"bg-gray-50 rounded-lg p-4"},W={class:"text-sm text-gray-600 space-y-1"},X={class:"flex items-center justify-end pt-6 border-t"},Z=["disabled"],ee={key:0},te={key:1},se={key:1,class:"bg-white rounded-lg shadow-sm border p-6"},re={class:"flex items-center justify-between mb-4"},oe={class:"space-y-3"},le={class:"text-sm font-medium text-gray-900"},ae={class:"text-xs text-gray-500"},ie={class:"text-right"},ne={class:"text-sm font-medium text-gray-900"},be={__name:"Settings",props:{user:Object,vehicles:Array,stats:Object,recentOvercharges:Array},setup(a){const d=a,r=_({enable_overcharges:d.user.enable_overcharges||!1,late_return_rate:d.user.late_return_rate||100,out_of_city_base:d.user.out_of_city_base||500,out_of_city_rate:d.user.out_of_city_rate||25,grace_period_minutes:d.user.grace_period_minutes||30,overcharge_instructions:d.user.overcharge_instructions||""}),v=()=>{r.post(route("owner.overcharges.updateSettings"),{preserveScroll:!0,onSuccess:()=>{}})},g=c=>parseFloat(c||0).toFixed(2),y=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(c,t)=>(n(),i(p,null,[b(s(h),{title:"Overcharge Settings"}),b(C,null,{default:f(()=>[e("div",U,[e("div",R,[t[30]||(t[30]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-800"}," Overcharge "),e("p",{class:"text-gray-600 mt-2"}," See and manage your overcharge settings ")],-1)),e("div",j,[t[29]||(t[29]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("div",{class:"flex items-center space-x-3"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("div",null,[e("h3",{class:"text-sm font-medium text-blue-900"},"Overcharge Protection"),e("p",{class:"text-sm text-blue-700"},"Charge renters for late returns or out-of-city use to protect your vehicles")])])],-1)),a.stats?(n(),i("div",B,[t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Your Overcharge Summary",-1)),e("div",z,[e("div",D,[e("div",M,"₱"+l(g(a.stats.total_overcharges||0)),1),t[6]||(t[6]=e("div",{class:"text-xs text-gray-500"},"Total Earned",-1))]),e("div",P,[e("div",T,"₱"+l(g(a.stats.unpaid_overcharges||0)),1),t[7]||(t[7]=e("div",{class:"text-xs text-gray-500"},"Unpaid",-1))]),e("div",A,[e("div",E,l(a.stats.late_returns_count||0),1),t[8]||(t[8]=e("div",{class:"text-xs text-gray-500"},"Late Returns",-1))]),e("div",L,[e("div",N,l(a.stats.out_of_city_count||0),1),t[9]||(t[9]=e("div",{class:"text-xs text-gray-500"},"Out of City",-1))])])])):x("",!0),e("div",H,[e("form",{onSubmit:w(v,["prevent"]),class:"space-y-6"},[e("div",G,[t[12]||(t[12]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Enable Overcharges"),e("p",{class:"text-sm text-gray-600"},"Turn on automatic overcharge calculations for all your vehicles")],-1)),e("label",I,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=o=>s(r).enable_overcharges=o),class:"sr-only peer"},null,512),[[k,s(r).enable_overcharges]]),t[11]||(t[11]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),s(r).enable_overcharges?(n(),i("div",K,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Grace Period (minutes) ",-1)),t[14]||(t[14]=e("p",{class:"text-xs text-gray-500 mb-3"}," How many minutes late before charging overcharges ",-1)),u(e("input",{type:"number",min:"0",max:"720","onUpdate:modelValue":t[1]||(t[1]=o=>s(r).grace_period_minutes=o),class:"block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"30"},null,512),[[m,s(r).grace_period_minutes]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Late Return Rate (₱ per hour) ",-1)),t[17]||(t[17]=e("p",{class:"text-xs text-gray-500 mb-3"}," How much to charge for each hour the vehicle is returned late ",-1)),e("div",Y,[u(e("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":t[2]||(t[2]=o=>s(r).late_return_rate=o),class:"block w-full pl-8 border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"100.00"},null,512),[[m,s(r).late_return_rate]]),t[15]||(t[15]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[e("span",{class:"text-gray-500"},"₱")],-1))])]),e("div",$,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Out of City Base Fee (₱) ",-1)),t[20]||(t[20]=e("p",{class:"text-xs text-gray-500 mb-3"}," Fixed fee for returning outside city limits ",-1)),e("div",q,[u(e("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":t[3]||(t[3]=o=>s(r).out_of_city_base=o),class:"block w-full pl-8 border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"500.00"},null,512),[[m,s(r).out_of_city_base]]),t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[e("span",{class:"text-gray-500"},"₱")],-1))])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Per Kilometer Rate (₱) ",-1)),t[23]||(t[23]=e("p",{class:"text-xs text-gray-500 mb-3"}," Additional charge per km from city center ",-1)),e("div",J,[u(e("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":t[4]||(t[4]=o=>s(r).out_of_city_rate=o),class:"block w-full pl-8 border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"25.00"},null,512),[[m,s(r).out_of_city_rate]]),t[21]||(t[21]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[e("span",{class:"text-gray-500"},"₱")],-1))])])]),e("div",Q,[t[24]||(t[24]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Examples",-1)),e("div",W,[e("div",null,"• 2 hours late: ₱"+l((2*(parseFloat(s(r).late_return_rate)||0)).toFixed(2)),1),e("div",null,"• Returned 10km outside city: ₱"+l(((parseFloat(s(r).out_of_city_base)||0)+10*(parseFloat(s(r).out_of_city_rate)||0)).toFixed(2)),1)])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Instructions for Renters (Optional) ",-1)),t[26]||(t[26]=e("p",{class:"text-xs text-gray-500 mb-3"}," These instructions will be shown to renters when they book your vehicles ",-1)),u(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>s(r).overcharge_instructions=o),rows:"3",class:"block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Please return the vehicle on time and within city limits to avoid additional charges."},null,512),[[m,s(r).overcharge_instructions]])])])):x("",!0),e("div",X,[e("button",{type:"submit",disabled:s(r).processing,class:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md disabled:opacity-50 disabled:cursor-not-allowed"},[s(r).processing?(n(),i("span",ee,"Saving...")):(n(),i("span",te,"Save Settings"))],8,Z)])],32)]),a.recentOvercharges&&a.recentOvercharges.length>0?(n(),i("div",se,[e("div",re,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium text-gray-900"},"Recent Overcharges",-1)),b(s(S),{href:c.route("owner.overcharges.stats"),class:"text-blue-600 hover:text-blue-800 text-sm"},{default:f(()=>t[27]||(t[27]=[O(" View All → ")])),_:1,__:[27]},8,["href"])]),e("div",oe,[(n(!0),i(p,null,F(a.recentOvercharges,o=>(n(),i("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",le," Booking #"+l(o.booking_id),1),e("div",ae,l(o.details)+" • "+l(y(o.occurred_at)),1)]),e("div",ie,[e("div",ne,"₱"+l(g(o.amount)),1),e("div",{class:V(["text-xs",o.is_paid?"text-green-600":"text-red-600"])},l(o.is_paid?"Paid":"Unpaid"),3)])]))),128))])])):x("",!0)])])])]),_:1})],64))}};export{be as default};
